{
  "hash": "458e989a20fa3ed7d4d7abfc1e4c3ce9",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"SVMs and more tuning\"\neditor_options: \n  chunk_output_type: console\n---\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(mlr3verse) # All the mlr3 things\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Loading required package: mlr3\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(ggplot2) # For plotting\n\n# Spam Task setup\nspam_task <- tsk(\"spam\")\nset.seed(26)\n\n# train/test split\nspam_split <- partition(spam_task, ratio = 2 / 3)\n```\n:::\n\n\nGoals of this part:\n\n1.  Introduce SVMs\n2.  Tune an SVM with a more complex setup\n\n# Support Vector Machines\n\nLet's circle back to new learners and explore SVMs a little by trying out different kernels at the example of our penguin dataset we used in the beginning:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\npenguins <- na.omit(palmerpenguins::penguins)\n\nggplot(penguins, aes(x = flipper_length_mm, y = body_mass_g, color = species)) +\n  geom_point() +\n  labs(\n    title = \"Palmer Penguins\",\n    x = \"Flipper Length [mm]\",\n    y = \"Body Mass [g]\",\n    color = \"Species\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](05-svm-tuning_files/figure-html/penguins-1.png){fig-align='center' width=672}\n:::\n:::\n\n\nSince we don't care about prediction accuracy for now, we'll use the whole dataset for training and prediction. Please only do this with toy data ðŸ™ƒ.\n\nFor the SVM algorithm itself, we use the `svm` learner from the `{e1071}` package (great name, I know) but once again use `{mlr3}`'s interface\n\nAccording to the docs (`?e1071::svm`) we have the choice of the following kernels:\n\n-   `\"linear\"`: $u'v$\n-   `\"polynomial\"`: $(\\mathtt{gamma} \\cdot u' \\cdot v + \\mathtt{coef0})^\\mathtt{degree}$\n-   `\"radial\"`: $\\exp(-\\mathtt{gamma} \\cdot |u-v|^2)$\n-   `\"sigmoid\"`: $\\tanh(\\mathtt{gamma} \\cdot u'v + \\mathtt{coef0})$\n\nWhere `gamma`, `degree`, and `coef0` are further hyperparameters.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nsvm_learner <- lrn(\"classif.svm\")\n\n# What parameters do we have and what's the default kernel?\nsvm_learner$param_set\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> <ParamSet(16)>\n#> Key: <id>\n#>                  id    class lower upper nlevels          default parents\n#>              <char>   <char> <num> <num>   <num>           <list>  <list>\n#>  1:       cachesize ParamDbl  -Inf   Inf     Inf               40  [NULL]\n#>  2:   class.weights ParamUty    NA    NA     Inf           [NULL]  [NULL]\n#>  3:           coef0 ParamDbl  -Inf   Inf     Inf                0  kernel\n#>  4:            cost ParamDbl     0   Inf     Inf                1    type\n#>  5:           cross ParamInt     0   Inf     Inf                0  [NULL]\n#>  6: decision.values ParamLgl    NA    NA       2            FALSE  [NULL]\n#>  7:          degree ParamInt     1   Inf     Inf                3  kernel\n#>  8:         epsilon ParamDbl     0   Inf     Inf              0.1  [NULL]\n#>  9:          fitted ParamLgl    NA    NA       2             TRUE  [NULL]\n#> 10:           gamma ParamDbl     0   Inf     Inf   <NoDefault[0]>  kernel\n#> 11:          kernel ParamFct    NA    NA       4           radial  [NULL]\n#> 12:              nu ParamDbl  -Inf   Inf     Inf              0.5    type\n#> 13:           scale ParamUty    NA    NA     Inf             TRUE  [NULL]\n#> 14:       shrinking ParamLgl    NA    NA       2             TRUE  [NULL]\n#> 15:       tolerance ParamDbl     0   Inf     Inf            0.001  [NULL]\n#> 16:            type ParamFct    NA    NA       2 C-classification  [NULL]\n#>      value\n#>     <list>\n#>  1: [NULL]\n#>  2: [NULL]\n#>  3: [NULL]\n#>  4: [NULL]\n#>  5: [NULL]\n#>  6: [NULL]\n#>  7: [NULL]\n#>  8: [NULL]\n#>  9: [NULL]\n#> 10: [NULL]\n#> 11: [NULL]\n#> 12: [NULL]\n#> 13: [NULL]\n#> 14: [NULL]\n#> 15: [NULL]\n#> 16: [NULL]\n```\n\n\n:::\n:::\n\n\n## Your Turn!\n\nBelow you have a boilerplate for\n\na)  Creating an SVM learner and train it on the penguin dataset with 2 predictors\nb)  Plotting decision boundaries with it (using the `{mlr3}` helper function)\n\nRun the code below once to see what linear decision boundaries look like, then pick different kernels from the list above and run it again.\n\n-   What kernel would you pick just by the looks of the boundaries?\n-   How do the boundaries change if you also adjust the other hyperparameters?\n-   Try picking any other two variables as features (`penguin_task$col_info`)\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\npenguin_task <- as_task_classif(\n  na.omit(palmerpenguins::penguins),\n  target = \"species\"\n)\npenguin_task$col_roles$feature <- c(\"body_mass_g\", \"flipper_length_mm\")\n```\n:::\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Create the learner, picking a kernel and/or other hyperparams\nsvm_learner <- lrn(\"classif.svm\", kernel = \"polynomial\", degree = 3)\n\n# Plot decision boundaries\nplot_learner_prediction(\n  learner = svm_learner,\n  task = penguin_task\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> INFO  [23:20:46.416] [mlr3] Applying learner 'classif.svm' on task 'na.omit(palmerpenguins::penguins)' (iter 1/1)\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Warning: Raster pixels are placed at uneven horizontal intervals and will be shifted\n#> â„¹ Consider using `geom_tile()` instead.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](05-svm-tuning_files/figure-html/svm-decision-boundaries-1.png){fig-align='center' width=672}\n:::\n:::\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# your code\n```\n:::\n\n\n::: {.callout-tip title=\"Example solution\" collapse =\"true\"}\n\nDirectly comparing multiple kernels with default parameters:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\npenguin_task <- as_task_classif(\n  na.omit(palmerpenguins::penguins),\n  target = \"species\"\n)\npenguin_task$col_roles$feature <- c(\"body_mass_g\", \"flipper_length_mm\")\n\n# Create a list of plots for each kernel\nplots <- lapply(c(\"linear\", \"polynomial\", \"radial\", \"sigmoid\"), \\(kernel) {\n  plot_learner_prediction(\n    learner = lrn(\"classif.svm\", kernel = kernel),\n    task = penguin_task\n  ) +\n    labs(subtitle = paste(\"SVM with \", kernel, \"kernel\"))\n})\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> INFO  [23:20:46.786] [mlr3] Applying learner 'classif.svm' on task 'na.omit(palmerpenguins::penguins)' (iter 1/1)\n#> INFO  [23:20:46.865] [mlr3] Applying learner 'classif.svm' on task 'na.omit(palmerpenguins::penguins)' (iter 1/1)\n#> INFO  [23:20:46.953] [mlr3] Applying learner 'classif.svm' on task 'na.omit(palmerpenguins::penguins)' (iter 1/1)\n#> INFO  [23:20:47.040] [mlr3] Applying learner 'classif.svm' on task 'na.omit(palmerpenguins::penguins)' (iter 1/1)\n```\n\n\n:::\n\n```{.r .cell-code}\n# Arrange the plots with the patchwork package\npatchwork::wrap_plots(plots, guides = \"collect\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Warning: Raster pixels are placed at uneven horizontal intervals and will be shifted\n#> â„¹ Consider using `geom_tile()` instead.\n#> Raster pixels are placed at uneven horizontal intervals and will be shifted\n#> â„¹ Consider using `geom_tile()` instead.\n#> Raster pixels are placed at uneven horizontal intervals and will be shifted\n#> â„¹ Consider using `geom_tile()` instead.\n#> Raster pixels are placed at uneven horizontal intervals and will be shifted\n#> â„¹ Consider using `geom_tile()` instead.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](05-svm-tuning_files/figure-html/svm-kernel-boundaries-1.png){fig-align='center' width=672}\n:::\n:::\n\n\n:::\n\n\n## SVM-Tuning\n\nLet's try a more complex tuning experiment, based on the spam task from before.\n\nWe'll create a new SVM learner object and this time explicitly tell it which classification to do --- that's the default value anyway, but `{mlr3}` wants us to be explicit here for tuning:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nsvm_learner <- lrn(\n  \"classif.svm\",\n  predict_type = \"prob\",\n  type = \"C-classification\"\n)\n```\n:::\n\n\nFirst up we'll define our search space, meaning the range of parameters we want to test out. Since `kernel` is a categorical parameter (i.e. no numbers, just names of kernels), we'll define the search space for that parameter by just passing the names of the kernels to the `p_fct()` helper function that defines `factor`-parameters in `{mlr3}`.\n\nThe interesting thing here is that some parameters are only relevant for some kernels, which we can declare via a `depends` argument:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nsearch_space_svm = ps(\n  kernel = p_fct(c(\"linear\", \"polynomial\", \"radial\", \"sigmoid\")),\n  # Degree is onoly relevant if \"kernel\" is \"polynomial\"\n  degree = p_int(lower = 1, upper = 7, depends = kernel == \"polynomial\")\n)\n```\n:::\n\n\nWe can create an example design grid to inspect our setup and see that `degree` is `NA` for cases where `kernel` is not `\"polynomial\"`, just as we expected\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ngenerate_design_grid(search_space_svm, resolution = 3)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> <Design> with 6 rows:\n#>        kernel degree\n#>        <char>  <int>\n#> 1:     linear     NA\n#> 2: polynomial      1\n#> 3: polynomial      4\n#> 4: polynomial      7\n#> 5:     radial     NA\n#> 6:    sigmoid     NA\n```\n\n\n:::\n:::\n\n\n## Your Turn!\n\nThe above should get you started to...\n\n1.  Create a `search_space_svm` like above, tuning...\n\n-   `cost` from 0.1 to 1 (hint: `trafo = function(x) 10^x`)\n-   `kernel`, (like above example)\n-   `degree`, as above, **only if** `kernel == \"polynomial\"`\n-   `gamma`, from e.g. 0.01 to 0.2, **only if** `kernel` is polynomial, radial, sigmoid (hint: you can't use `kernel != \"linear\"` unfortunately, but `kernel %in% c(...)`) works\n\n2.  Use the `auto_tuner` function as previously seen with\n\n-   `svm_learner` (see above)\n-   A resampling strategy (use `\"holdout\"` if runtime is an issue)\n-   A measure (e.g. `classif.acc` or `classif.auc`)\n-   The search space you created in 1.\n-   A termination criterion (e.g. 40 evaluations)\n-   Random search as your tuning strategy\n\n3.  Train the auto-tuned learner and evaluate on the test set\n\nWhat parameter settings worked best?\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# your code\n```\n:::\n\n\n::: {.callout-tip title=\"Example solution\" collapse =\"true\"}\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nsearch_space_svm = ps(\n  cost = p_dbl(-1, 1, trafo = function(x) 10^x),\n  kernel = p_fct(c(\"linear\", \"polynomial\", \"radial\", \"sigmoid\")),\n  degree = p_int(1, 7, depends = kernel == \"polynomial\"),\n  gamma = p_dbl(\n    lower = 0.01,\n    upper = 0.2,\n    depends = kernel %in% c(\"polynomial\", \"radial\", \"sigmoid\")\n  )\n)\n\ngrid <- generate_design_grid(search_space_svm, resolution = 6)\n\n# Look at grid with transformed cost param (manual way, there's probably a better one)\ngrid$data$cost_trafo <- 10^grid$data$cost\ngrid$data\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#>       cost     kernel degree gamma cost_trafo\n#>      <num>     <char>  <int> <num>      <num>\n#>   1:    -1     linear     NA    NA        0.1\n#>   2:    -1 polynomial      1 0.010        0.1\n#>   3:    -1 polynomial      1 0.048        0.1\n#>   4:    -1 polynomial      1 0.086        0.1\n#>   5:    -1 polynomial      1 0.124        0.1\n#>  ---                                         \n#> 290:     1    sigmoid     NA 0.048       10.0\n#> 291:     1    sigmoid     NA 0.086       10.0\n#> 292:     1    sigmoid     NA 0.124       10.0\n#> 293:     1    sigmoid     NA 0.162       10.0\n#> 294:     1    sigmoid     NA 0.200       10.0\n```\n\n\n:::\n:::\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nset.seed(313)\n\ntuned_svm = auto_tuner(\n  learner = lrn(\n    \"classif.svm\",\n    predict_type = \"prob\",\n    type = \"C-classification\"\n  ),\n  resampling = rsmp(\"holdout\"),\n  measure = msr(\"classif.auc\"),\n  search_space = search_space_svm,\n  terminator = trm(\"evals\", n_evals = 40),\n  tuner = tnr(\"random_search\")\n)\n\n# Tune!\ntuned_svm$train(spam_task, row_ids = spam_split$train)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> INFO  [23:20:47.716] [bbotk] Starting to optimize 4 parameter(s) with '<OptimizerBatchRandomSearch>' and '<TerminatorEvals> [n_evals=40, k=0]'\n#> INFO  [23:20:47.737] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:20:47.744] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:20:47.749] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:20:48.306] [mlr3] Finished benchmark\n#> INFO  [23:20:48.321] [bbotk] Result of batch 1:\n#> INFO  [23:20:48.323] [bbotk]        cost  kernel degree     gamma classif.auc warnings errors\n#> INFO  [23:20:48.323] [bbotk]  -0.6822099 sigmoid     NA 0.1616588   0.8734847        0      0\n#> INFO  [23:20:48.323] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:20:48.323] [bbotk]             0.552 863c14a8-7124-4f5a-9aa8-e503d3cd9d16\n#> INFO  [23:20:48.445] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:20:48.451] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:20:48.456] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:20:48.941] [mlr3] Finished benchmark\n#> INFO  [23:20:48.959] [bbotk] Result of batch 2:\n#> INFO  [23:20:48.960] [bbotk]        cost kernel degree gamma classif.auc warnings errors runtime_learners\n#> INFO  [23:20:48.960] [bbotk]  -0.6450028 linear     NA    NA   0.9686214        0      0             0.48\n#> INFO  [23:20:48.960] [bbotk]                                 uhash\n#> INFO  [23:20:48.960] [bbotk]  f0232d6b-a626-4bd9-97d2-a9562eec1373\n#> INFO  [23:20:48.968] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:20:48.975] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:20:48.980] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:20:49.398] [mlr3] Finished benchmark\n#> INFO  [23:20:49.412] [bbotk] Result of batch 3:\n#> INFO  [23:20:49.413] [bbotk]       cost  kernel degree      gamma classif.auc warnings errors\n#> INFO  [23:20:49.413] [bbotk]  0.8984124 sigmoid     NA 0.01141063   0.9285249        0      0\n#> INFO  [23:20:49.413] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:20:49.413] [bbotk]             0.409 a2039a04-120d-46c3-bc61-4c47b7c22f3a\n#> INFO  [23:20:49.421] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:20:49.427] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:20:49.432] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:20:49.944] [mlr3] Finished benchmark\n#> INFO  [23:20:49.961] [bbotk] Result of batch 4:\n#> INFO  [23:20:49.962] [bbotk]       cost  kernel degree      gamma classif.auc warnings errors\n#> INFO  [23:20:49.962] [bbotk]  0.1509409 sigmoid     NA 0.05019996    0.891037        0      0\n#> INFO  [23:20:49.962] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:20:49.962] [bbotk]             0.507 f17bed50-5dcf-430a-b1e6-274c14e3b98c\n#> INFO  [23:20:49.970] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:20:49.976] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:20:49.981] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:20:50.465] [mlr3] Finished benchmark\n#> INFO  [23:20:50.480] [bbotk] Result of batch 5:\n#> INFO  [23:20:50.482] [bbotk]       cost  kernel degree     gamma classif.auc warnings errors\n#> INFO  [23:20:50.482] [bbotk]  0.9455257 sigmoid     NA 0.1810499   0.8449879        0      0\n#> INFO  [23:20:50.482] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:20:50.482] [bbotk]             0.479 304ff020-d794-4044-b36f-e67007409969\n#> INFO  [23:20:50.491] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:20:50.497] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:20:50.502] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:20:51.054] [mlr3] Finished benchmark\n#> INFO  [23:20:51.069] [bbotk] Result of batch 6:\n#> INFO  [23:20:51.071] [bbotk]       cost     kernel degree      gamma classif.auc warnings errors\n#> INFO  [23:20:51.071] [bbotk]  0.6023674 polynomial      3 0.09276489   0.9476628        0      0\n#> INFO  [23:20:51.071] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:20:51.071] [bbotk]             0.548 aa437611-667b-491e-a7de-028056fcb8ac\n#> INFO  [23:20:51.080] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:20:51.085] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:20:51.090] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:20:52.384] [mlr3] Finished benchmark\n#> INFO  [23:20:52.400] [bbotk] Result of batch 7:\n#> INFO  [23:20:52.402] [bbotk]       cost kernel degree      gamma classif.auc warnings errors\n#> INFO  [23:20:52.402] [bbotk]  0.5193901 radial     NA 0.09999874   0.9607295        0      0\n#> INFO  [23:20:52.402] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:20:52.402] [bbotk]              1.29 f90e72b6-92b3-4efa-8122-c14640ca8430\n#> INFO  [23:20:52.415] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:20:52.420] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:20:52.425] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:20:53.951] [mlr3] Finished benchmark\n#> INFO  [23:20:53.966] [bbotk] Result of batch 8:\n#> INFO  [23:20:53.967] [bbotk]      cost kernel degree   gamma classif.auc warnings errors runtime_learners\n#> INFO  [23:20:53.967] [bbotk]  0.390257 radial     NA 0.13199   0.9583802        0      0             1.52\n#> INFO  [23:20:53.967] [bbotk]                                 uhash\n#> INFO  [23:20:53.967] [bbotk]  4f49ec3e-00b7-4769-887a-e34de9dbba86\n#> INFO  [23:20:53.976] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:20:53.982] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:20:53.987] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:20:54.475] [mlr3] Finished benchmark\n#> INFO  [23:20:54.491] [bbotk] Result of batch 9:\n#> INFO  [23:20:54.493] [bbotk]        cost kernel degree gamma classif.auc warnings errors runtime_learners\n#> INFO  [23:20:54.493] [bbotk]  -0.7548642 linear     NA    NA   0.9683802        0      0            0.483\n#> INFO  [23:20:54.493] [bbotk]                                 uhash\n#> INFO  [23:20:54.493] [bbotk]  8e228fa8-b075-481a-b586-827d5e9d7624\n#> INFO  [23:20:54.502] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:20:54.508] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:20:54.513] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:20:55.627] [mlr3] Finished benchmark\n#> INFO  [23:20:55.643] [bbotk] Result of batch 10:\n#> INFO  [23:20:55.644] [bbotk]        cost kernel degree      gamma classif.auc warnings errors\n#> INFO  [23:20:55.644] [bbotk]  -0.8124776 radial     NA 0.05523449   0.9514108        0      0\n#> INFO  [23:20:55.644] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:20:55.644] [bbotk]             1.109 56a59abf-4ac1-420f-999e-b1012155ad71\n#> INFO  [23:20:55.653] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:20:55.658] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:20:55.663] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:20:57.061] [mlr3] Finished benchmark\n#> INFO  [23:20:57.076] [bbotk] Result of batch 11:\n#> INFO  [23:20:57.077] [bbotk]       cost kernel degree gamma classif.auc warnings errors runtime_learners\n#> INFO  [23:20:57.077] [bbotk]  0.6799399 linear     NA    NA   0.9684968        0      0            1.393\n#> INFO  [23:20:57.077] [bbotk]                                 uhash\n#> INFO  [23:20:57.077] [bbotk]  8773b6ba-c78d-4b84-b4ae-21f0af143bdc\n#> INFO  [23:20:57.089] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:20:57.095] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:20:57.100] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:20:57.704] [mlr3] Finished benchmark\n#> INFO  [23:20:57.720] [bbotk] Result of batch 12:\n#> INFO  [23:20:57.721] [bbotk]       cost  kernel degree     gamma classif.auc warnings errors\n#> INFO  [23:20:57.721] [bbotk]  0.7868932 sigmoid     NA 0.1636982   0.8478577        0      0\n#> INFO  [23:20:57.721] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:20:57.721] [bbotk]               0.6 3dc8f9b7-8f34-469b-9f7e-65dd3648fae3\n#> INFO  [23:20:57.731] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:20:57.738] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:20:57.743] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:20:58.496] [mlr3] Finished benchmark\n#> INFO  [23:20:58.511] [bbotk] Result of batch 13:\n#> INFO  [23:20:58.512] [bbotk]        cost  kernel degree    gamma classif.auc warnings errors\n#> INFO  [23:20:58.512] [bbotk]  -0.9922801 sigmoid     NA 0.104775   0.9275121        0      0\n#> INFO  [23:20:58.512] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:20:58.512] [bbotk]             0.748 068dc33d-572e-4c5f-8e9c-c33532dc303a\n#> INFO  [23:20:58.521] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:20:58.527] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:20:58.532] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:20:58.989] [mlr3] Finished benchmark\n#> INFO  [23:20:59.004] [bbotk] Result of batch 14:\n#> INFO  [23:20:59.006] [bbotk]      cost  kernel degree      gamma classif.auc warnings errors\n#> INFO  [23:20:59.006] [bbotk]  0.790148 sigmoid     NA 0.06053824   0.8899437        0      0\n#> INFO  [23:20:59.006] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:20:59.006] [bbotk]             0.451 b8042c66-0849-419a-ae0b-7bb59cbfab45\n#> INFO  [23:20:59.018] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:20:59.024] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:20:59.029] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:21:00.187] [mlr3] Finished benchmark\n#> INFO  [23:21:00.202] [bbotk] Result of batch 15:\n#> INFO  [23:21:00.204] [bbotk]        cost kernel degree     gamma classif.auc warnings errors\n#> INFO  [23:21:00.204] [bbotk]  -0.1012446 radial     NA 0.1207929   0.9579502        0      0\n#> INFO  [23:21:00.204] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:21:00.204] [bbotk]             1.153 8a2ec5df-a4c3-4e72-8666-74d47dd99fcb\n#> INFO  [23:21:00.213] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:21:00.219] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:21:00.223] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:21:00.783] [mlr3] Finished benchmark\n#> INFO  [23:21:00.802] [bbotk] Result of batch 16:\n#> INFO  [23:21:00.804] [bbotk]        cost     kernel degree     gamma classif.auc warnings errors\n#> INFO  [23:21:00.804] [bbotk]  -0.2715305 polynomial      3 0.1355686   0.9532898        0      0\n#> INFO  [23:21:00.804] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:21:00.804] [bbotk]             0.555 bf8dcaae-0466-4daf-a988-9891c070f89a\n#> INFO  [23:21:00.813] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:21:00.819] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:21:00.825] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:21:02.206] [mlr3] Finished benchmark\n#> INFO  [23:21:02.220] [bbotk] Result of batch 17:\n#> INFO  [23:21:02.222] [bbotk]        cost kernel degree     gamma classif.auc warnings errors\n#> INFO  [23:21:02.222] [bbotk]  -0.2421622 radial     NA 0.1686133    0.953742        0      0\n#> INFO  [23:21:02.222] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:21:02.222] [bbotk]             1.376 52b343cf-5290-4d5f-b07b-7d1dbb28601d\n#> INFO  [23:21:02.231] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:21:02.237] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:21:02.242] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:21:03.559] [mlr3] Finished benchmark\n#> INFO  [23:21:03.573] [bbotk] Result of batch 18:\n#> INFO  [23:21:03.575] [bbotk]        cost kernel degree      gamma classif.auc warnings errors\n#> INFO  [23:21:03.575] [bbotk]  -0.9009985 radial     NA 0.09712621   0.9430044        0      0\n#> INFO  [23:21:03.575] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:21:03.575] [bbotk]             1.313 0c230f99-b9ae-4da6-8dad-c7e5a7796217\n#> INFO  [23:21:03.583] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:21:03.589] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:21:03.594] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:21:04.266] [mlr3] Finished benchmark\n#> INFO  [23:21:04.281] [bbotk] Result of batch 19:\n#> INFO  [23:21:04.282] [bbotk]       cost     kernel degree     gamma classif.auc warnings errors\n#> INFO  [23:21:04.282] [bbotk]  0.3821866 polynomial      5 0.1204278   0.9233159        0      0\n#> INFO  [23:21:04.282] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:21:04.282] [bbotk]             0.668 08f5799f-7f35-4837-bcdd-143807077b6f\n#> INFO  [23:21:04.290] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:21:04.296] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:21:04.300] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:21:05.024] [mlr3] Finished benchmark\n#> INFO  [23:21:05.038] [bbotk] Result of batch 20:\n#> INFO  [23:21:05.040] [bbotk]       cost     kernel degree     gamma classif.auc warnings errors\n#> INFO  [23:21:05.040] [bbotk]  0.7460784 polynomial      7 0.1637225   0.9048633        0      0\n#> INFO  [23:21:05.040] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:21:05.040] [bbotk]             0.718 e2b5ea9c-d2b5-46aa-af5a-a1abd5d5648b\n#> INFO  [23:21:05.048] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:21:05.053] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:21:05.058] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:21:06.473] [mlr3] Finished benchmark\n#> INFO  [23:21:06.488] [bbotk] Result of batch 21:\n#> INFO  [23:21:06.489] [bbotk]        cost kernel degree     gamma classif.auc warnings errors\n#> INFO  [23:21:06.489] [bbotk]  -0.8161055 radial     NA 0.1789979   0.9397508        0      0\n#> INFO  [23:21:06.489] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:21:06.489] [bbotk]              1.41 2b37a046-3efa-4ce0-9c73-7a896c79c8ff\n#> INFO  [23:21:06.498] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:21:06.504] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:21:06.509] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:21:07.145] [mlr3] Finished benchmark\n#> INFO  [23:21:07.160] [bbotk] Result of batch 22:\n#> INFO  [23:21:07.161] [bbotk]         cost kernel degree gamma classif.auc warnings errors runtime_learners\n#> INFO  [23:21:07.161] [bbotk]  -0.07166682 linear     NA    NA   0.9690756        0      0            0.632\n#> INFO  [23:21:07.161] [bbotk]                                 uhash\n#> INFO  [23:21:07.161] [bbotk]  82f3f10c-3bfa-49ba-97a4-5e5562c5398c\n#> INFO  [23:21:07.173] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:21:07.178] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:21:07.183] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:21:08.551] [mlr3] Finished benchmark\n#> INFO  [23:21:08.566] [bbotk] Result of batch 23:\n#> INFO  [23:21:08.568] [bbotk]       cost kernel degree     gamma classif.auc warnings errors runtime_learners\n#> INFO  [23:21:08.568] [bbotk]  0.2154819 radial     NA 0.1292934    0.958332        0      0            1.362\n#> INFO  [23:21:08.568] [bbotk]                                 uhash\n#> INFO  [23:21:08.568] [bbotk]  3a7a51bb-3ab4-45eb-8e4c-c33541484a3f\n#> INFO  [23:21:08.577] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:21:08.586] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:21:08.593] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:21:09.077] [mlr3] Finished benchmark\n#> INFO  [23:21:09.093] [bbotk] Result of batch 24:\n#> INFO  [23:21:09.094] [bbotk]       cost  kernel degree     gamma classif.auc warnings errors\n#> INFO  [23:21:09.094] [bbotk]  0.9292742 sigmoid     NA 0.1826756   0.8441801        0      0\n#> INFO  [23:21:09.094] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:21:09.094] [bbotk]             0.479 68fd98d8-79c9-4be2-9e4b-bc9e94090b39\n#> INFO  [23:21:09.102] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:21:09.108] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:21:09.113] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:21:09.602] [mlr3] Finished benchmark\n#> INFO  [23:21:09.617] [bbotk] Result of batch 25:\n#> INFO  [23:21:09.618] [bbotk]        cost kernel degree gamma classif.auc warnings errors runtime_learners\n#> INFO  [23:21:09.618] [bbotk]  -0.7159391 linear     NA    NA   0.9685209        0      0            0.486\n#> INFO  [23:21:09.618] [bbotk]                                 uhash\n#> INFO  [23:21:09.618] [bbotk]  da808016-df30-4db3-ad0f-5888c68c67a6\n#> INFO  [23:21:09.626] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:21:09.632] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:21:09.637] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:21:10.807] [mlr3] Finished benchmark\n#> INFO  [23:21:10.822] [bbotk] Result of batch 26:\n#> INFO  [23:21:10.823] [bbotk]        cost kernel degree     gamma classif.auc warnings errors\n#> INFO  [23:21:10.823] [bbotk]  -0.2707529 radial     NA 0.1142384   0.9565072        0      0\n#> INFO  [23:21:10.823] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:21:10.823] [bbotk]             1.166 3b166e76-ee22-4e3f-9494-fa018cf23ff4\n#> INFO  [23:21:10.832] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:21:10.838] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:21:10.842] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:21:11.370] [mlr3] Finished benchmark\n#> INFO  [23:21:11.385] [bbotk] Result of batch 27:\n#> INFO  [23:21:11.386] [bbotk]       cost     kernel degree     gamma classif.auc warnings errors\n#> INFO  [23:21:11.386] [bbotk]  0.6745258 polynomial      3 0.1412825   0.9470498        0      0\n#> INFO  [23:21:11.386] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:21:11.386] [bbotk]             0.523 cb4b7a46-ac8e-4ed6-b7f2-fb1caeb9c2b2\n#> INFO  [23:21:11.395] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:21:11.401] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:21:11.406] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:21:12.098] [mlr3] Finished benchmark\n#> INFO  [23:21:12.113] [bbotk] Result of batch 28:\n#> INFO  [23:21:12.114] [bbotk]        cost  kernel degree     gamma classif.auc warnings errors\n#> INFO  [23:21:12.114] [bbotk]  -0.7508148 sigmoid     NA 0.1498661   0.8808159        0      0\n#> INFO  [23:21:12.114] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:21:12.114] [bbotk]             0.687 da841a95-fee8-43c0-96b3-e5794617c238\n#> INFO  [23:21:12.123] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:21:12.129] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:21:12.134] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:21:12.845] [mlr3] Finished benchmark\n#> INFO  [23:21:12.861] [bbotk] Result of batch 29:\n#> INFO  [23:21:12.863] [bbotk]        cost  kernel degree      gamma classif.auc warnings errors\n#> INFO  [23:21:12.863] [bbotk]  -0.8497675 sigmoid     NA 0.09646477   0.9186535        0      0\n#> INFO  [23:21:12.863] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:21:12.863] [bbotk]             0.707 8e222806-bdc3-4bd1-8105-4de5e5bf7efe\n#> INFO  [23:21:12.872] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:21:12.878] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:21:12.883] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:21:14.116] [mlr3] Finished benchmark\n#> INFO  [23:21:14.130] [bbotk] Result of batch 30:\n#> INFO  [23:21:14.132] [bbotk]        cost kernel degree     gamma classif.auc warnings errors\n#> INFO  [23:21:14.132] [bbotk]  -0.1740692 radial     NA 0.1386397   0.9565213        0      0\n#> INFO  [23:21:14.132] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:21:14.132] [bbotk]             1.228 1cd379d1-50e3-48c2-b66e-3a877225f385\n#> INFO  [23:21:14.140] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:21:14.145] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:21:14.150] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:21:14.662] [mlr3] Finished benchmark\n#> INFO  [23:21:14.676] [bbotk] Result of batch 31:\n#> INFO  [23:21:14.677] [bbotk]        cost kernel degree gamma classif.auc warnings errors runtime_learners\n#> INFO  [23:21:14.677] [bbotk]  -0.3421337 linear     NA    NA   0.9692404        0      0            0.507\n#> INFO  [23:21:14.677] [bbotk]                                 uhash\n#> INFO  [23:21:14.677] [bbotk]  e8d32db2-d0a3-4d4c-a0cd-07dfc27ff4ca\n#> INFO  [23:21:14.685] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:21:14.691] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:21:14.696] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:21:15.317] [mlr3] Finished benchmark\n#> INFO  [23:21:15.331] [bbotk] Result of batch 32:\n#> INFO  [23:21:15.333] [bbotk]        cost  kernel degree     gamma classif.auc warnings errors\n#> INFO  [23:21:15.333] [bbotk]  -0.8117912 sigmoid     NA 0.1346607   0.8903859        0      0\n#> INFO  [23:21:15.333] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:21:15.333] [bbotk]             0.617 7e56f3a6-2713-47cd-b0ba-33953acbb0df\n#> INFO  [23:21:15.341] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:21:15.347] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:21:15.352] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:21:15.839] [mlr3] Finished benchmark\n#> INFO  [23:21:15.854] [bbotk] Result of batch 33:\n#> INFO  [23:21:15.855] [bbotk]       cost  kernel degree      gamma classif.auc warnings errors\n#> INFO  [23:21:15.855] [bbotk]  0.5639651 sigmoid     NA 0.02464691    0.904365        0      0\n#> INFO  [23:21:15.855] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:21:15.855] [bbotk]             0.483 ec93df48-8d1f-4a30-a410-91f23c727d57\n#> INFO  [23:21:15.863] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:21:15.873] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:21:15.878] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:21:16.623] [mlr3] Finished benchmark\n#> INFO  [23:21:16.638] [bbotk] Result of batch 34:\n#> INFO  [23:21:16.640] [bbotk]       cost     kernel degree     gamma classif.auc warnings errors\n#> INFO  [23:21:16.640] [bbotk]  0.5970128 polynomial      6 0.1064664   0.9081793        0      0\n#> INFO  [23:21:16.640] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:21:16.640] [bbotk]              0.74 f254351e-4518-4737-847d-c45063aa1ecf\n#> INFO  [23:21:16.650] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:21:16.659] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:21:16.664] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:21:17.342] [mlr3] Finished benchmark\n#> INFO  [23:21:17.358] [bbotk] Result of batch 35:\n#> INFO  [23:21:17.359] [bbotk]        cost     kernel degree     gamma classif.auc warnings errors\n#> INFO  [23:21:17.359] [bbotk]  0.04841973 polynomial      4 0.1337475   0.9176608        0      0\n#> INFO  [23:21:17.359] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:21:17.359] [bbotk]             0.674 52884322-d709-4389-a4b9-60f1b9fa31ff\n#> INFO  [23:21:17.368] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:21:17.374] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:21:17.380] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:21:17.860] [mlr3] Finished benchmark\n#> INFO  [23:21:17.874] [bbotk] Result of batch 36:\n#> INFO  [23:21:17.876] [bbotk]        cost kernel degree gamma classif.auc warnings errors runtime_learners\n#> INFO  [23:21:17.876] [bbotk]  -0.7770614 linear     NA    NA   0.9683079        0      0            0.475\n#> INFO  [23:21:17.876] [bbotk]                                 uhash\n#> INFO  [23:21:17.876] [bbotk]  3c0667bd-5c20-453d-9ca9-4ceb1f574ed0\n#> INFO  [23:21:17.884] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:21:17.890] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:21:17.895] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:21:18.631] [mlr3] Finished benchmark\n#> INFO  [23:21:18.646] [bbotk] Result of batch 37:\n#> INFO  [23:21:18.647] [bbotk]       cost     kernel degree   gamma classif.auc warnings errors\n#> INFO  [23:21:18.647] [bbotk]  0.4114269 polynomial      6 0.13385   0.8988746        0      0\n#> INFO  [23:21:18.647] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:21:18.647] [bbotk]             0.732 e1db435e-e0d4-404d-b47f-0567f6b30d6d\n#> INFO  [23:21:18.655] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:21:18.661] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:21:18.666] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:21:19.131] [mlr3] Finished benchmark\n#> INFO  [23:21:19.146] [bbotk] Result of batch 38:\n#> INFO  [23:21:19.147] [bbotk]       cost  kernel degree      gamma classif.auc warnings errors\n#> INFO  [23:21:19.147] [bbotk]  0.7752214 sigmoid     NA 0.05379679   0.8730145        0      0\n#> INFO  [23:21:19.147] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:21:19.147] [bbotk]             0.461 1c6b2c4f-fb61-4f3e-8820-65d6fc245bb7\n#> INFO  [23:21:19.156] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:21:19.162] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:21:19.167] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:21:19.653] [mlr3] Finished benchmark\n#> INFO  [23:21:19.668] [bbotk] Result of batch 39:\n#> INFO  [23:21:19.669] [bbotk]        cost kernel degree gamma classif.auc warnings errors runtime_learners\n#> INFO  [23:21:19.669] [bbotk]  -0.5680516 linear     NA    NA   0.9692524        0      0            0.482\n#> INFO  [23:21:19.669] [bbotk]                                 uhash\n#> INFO  [23:21:19.669] [bbotk]  aec2ecc7-37b1-46e9-b23d-1ff7d6d027b3\n#> INFO  [23:21:19.677] [bbotk] Evaluating 1 configuration(s)\n#> INFO  [23:21:19.683] [mlr3] Running benchmark with 1 resampling iterations\n#> INFO  [23:21:19.688] [mlr3] Applying learner 'classif.svm' on task 'spam' (iter 1/1)\n#> INFO  [23:21:20.254] [mlr3] Finished benchmark\n#> INFO  [23:21:20.269] [bbotk] Result of batch 40:\n#> INFO  [23:21:20.270] [bbotk]       cost  kernel degree      gamma classif.auc warnings errors\n#> INFO  [23:21:20.270] [bbotk]  0.1828651 sigmoid     NA 0.01471691   0.9411093        0      0\n#> INFO  [23:21:20.270] [bbotk]  runtime_learners                                uhash\n#> INFO  [23:21:20.270] [bbotk]             0.562 8688a014-b239-4bb2-88f0-3ccea006d013\n#> INFO  [23:21:20.289] [bbotk] Finished optimizing after 40 evaluation(s)\n#> INFO  [23:21:20.290] [bbotk] Result:\n#> INFO  [23:21:20.291] [bbotk]        cost kernel degree gamma learner_param_vals  x_domain classif.auc\n#> INFO  [23:21:20.291] [bbotk]       <num> <char>  <int> <num>             <list>    <list>       <num>\n#> INFO  [23:21:20.291] [bbotk]  -0.5680516 linear     NA    NA          <list[3]> <list[2]>   0.9692524\n```\n\n\n:::\n\n```{.r .cell-code}\n# Evaluate!\ntuned_svm$predict(spam_task, row_ids = spam_split$test)$score(msr(\n  \"classif.auc\"\n))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> classif.auc \n#>   0.9702688\n```\n\n\n:::\n\n```{.r .cell-code}\n# Hyperparam winner:\ntuned_svm$tuning_result\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#>          cost kernel degree gamma learner_param_vals  x_domain classif.auc\n#>         <num> <char>  <int> <num>             <list>    <list>       <num>\n#> 1: -0.5680516 linear     NA    NA          <list[3]> <list[2]>   0.9692524\n```\n\n\n:::\n\n```{.r .cell-code}\n# Remember that we transformed `cost`, here's the best value on the original scale\ntuned_svm$tuning_result$x_domain\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [[1]]\n#> [[1]]$cost\n#> [1] 0.2703637\n#> \n#> [[1]]$kernel\n#> [1] \"linear\"\n```\n\n\n:::\n\n```{.r .cell-code}\nautoplot(tuned_svm$tuning_instance)\n```\n\n::: {.cell-output-display}\n![](05-svm-tuning_files/figure-html/example-svm-tuning-1.png){fig-align='center' width=672}\n:::\n:::\n\n\n:::\n\n\n::: {.callout-tip title=\"SVM with categorical features\"}\nWe have not covered this so far, but if you want to tran an SVM (or many other learners) on tasks with categorical (\"nominal\") features (usually `factor` in R), we first need to encode them in a numeric format. The simplest way is to perform dummy- or one-hot encoding, and mlr3 has a whole slew of these sorts of rpeprocessing capabilities.\n\nThis works by creating a *pipeline* using the `%>>%` oeprator (not to be confused with the magrittr-pipe `%>%` you might be familiar with!). We take the `encode` pipeline operation (`PipeOp`) and stack it on top of our learner we create as usual. At the end we convert it to a regular learner, and `lrn_svm` is now a regular mlr3 learner we can use like any other, but with built-in encoding!\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlrn_svm_base <- lrn(\"classif.svm\", predict_type = \"prob\")\n\nlrn_svm <- po(\"encode\") %>>%\n  po(\"learner\", lrn_svm_base) |>\n  as_learner()\n\n# Penguin task (including categoricals!)\npenguin_task <- as_task_classif(\n  na.omit(palmerpenguins::penguins),\n  target = \"species\"\n)\n\n# Quick demo\nlrn_svm$train(penguin_task)\nlrn_svm$predict(penguin_task)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> \n#> â”€â”€ <PredictionClassif> for 333 observations: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n#>  row_ids     truth  response  prob.Adelie prob.Chinstrap prob.Gentoo\n#>        1    Adelie    Adelie 0.9897186263    0.004709601 0.005571773\n#>        2    Adelie    Adelie 0.9794937270    0.010353218 0.010153055\n#>        3    Adelie    Adelie 0.9754507758    0.014019113 0.010530111\n#>      ---       ---       ---          ---            ---         ---\n#>      331 Chinstrap Chinstrap 0.0131531135    0.979987515 0.006859371\n#>      332 Chinstrap Chinstrap 0.0049911109    0.986551962 0.008456927\n#>      333 Chinstrap Chinstrap 0.0005266358    0.993014315 0.006459049\n```\n\n\n:::\n:::\n\n\nPipelines are extremely useful and part of any reasonably complex machine learning pipeline, and to learn more you can read the [chapter in the mlr3book](https://mlr3book.mlr-org.com/chapters/chapter7/sequential_pipelines.html).\n:::\n",
    "supporting": [
      "05-svm-tuning_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}