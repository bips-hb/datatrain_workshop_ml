{
  "hash": "c37745ae48baee7109d69d08d9e01a67",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Tuning & SVMs\"\neditor_options: \n  chunk_output_type: console\n---\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(mlr3verse) # All the mlr3 things\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLoading required package: mlr3\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(ggplot2)   # For plotting\n\n# Spam Task setup\nspam_task <- tsk(\"spam\")\nset.seed(26)\n\n# train/test split\nspam_split <- partition(spam_task, ratio = 2/3)\n```\n:::\n\n\nGoals of this part:\n\n1.  Introduce hyperparameter tuning\n2.  Experiment with tuning different learners\n3.  Introduce SVMs\n4.  Tune an SVM with a more complex setup\n\n# Hyperparameter Tuning\n\nSo far we've seen four learners:\n\n1.  kNN via `{kknn}`\n2.  Decision Trees via `{rpart}`\n3.  Random Forest via `{ranger}`\n4.  Gradient Boosting via `{xgboost}`\n\nWe've gotten to know the first two a little, and now we'll also take a closer look at the second two.\n\nFirst we'll start doing some tuning with `{mlr3}` based on the **kNN** learner because it's nice and simple.\nWe saw that `k` is an important parameter, and it's an integer greater than 1 at least. To tune it, we also have to make a few other decisions, also using what we learned about (nested) resampling.\n\n-   What's our resampling strategy?\n-   What measure to we tune on?\n-   What does the parameter search space look like?\n-   How long to we tune? What's our *budget*?\n-   What's our tuning strategy?\n\nWe'll use `{mlr3}`'s [`auto_tuner`](https://mlr3book.mlr-org.com/chapters/chapter4/hyperparameter_optimization.html) for this because it's just so convenient:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Defining a search space: k is an integer, we look in range 3 to 51\nsearch_space_knn = ps(\n  k = p_int(lower = 3, upper = 51)\n)\n\ntuned_knn <- auto_tuner(\n  # The base learner we want to tune, optionally setting other parameters\n  learner = lrn(\"classif.kknn\", predict_type = \"prob\"),\n  # Resampling strategy for the tuning (inner resampling)\n  resampling = rsmp(\"cv\", folds = 3),\n  # Tuning measure: Maximize the classification accuracy\n  measure = msr(\"classif.bbrier\"),\n  # Setting the search space we defined above\n  search_space = search_space_knn,\n  # Budget: Try n_evals different values\n  terminator = trm(\"evals\", n_evals = 20),\n  # Strategy: Randomly try parameter values in the space\n  # (not ideal in this case but in general a good place to start)\n  tuner = tnr(\"random_search\")\n)\n\n# Take a look at the new tuning learner\ntuned_knn\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n── <AutoTuner> (classif.kknn.tuned) ────────────────────────────────────────────\n• Model: -\n• Parameters: list()\n• Packages: mlr3, mlr3tuning, mlr3learners, and kknn\n• Predict Types: response and [prob]\n• Feature Types: logical, integer, numeric, factor, and ordered\n• Encapsulation: none (fallback: -)\n• Properties: multiclass and twoclass\n• Other settings: use_weights = 'error'\n• Search Space:\n       id    class lower upper nlevels\n   <char>   <char> <num> <num>   <num>\n1:      k ParamInt     3    51      49\n```\n\n\n:::\n:::\n\n\nNow `tuned_knn` behaves the same way as any other Learner that has not been trained on any data yet --- first we have to train (and tune!) it on our spam training data. The result will be the best hyperparameter configuration of those we tried:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# If you're on your own machine with multiple cores available, you can parallelize:\nfuture::plan(\"multisession\")\n\n# Setting a seed so we get the same results -- train on train set only!\nset.seed(2398)\ntuned_knn$train(spam_task, row_ids = spam_split$train)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nINFO  [19:03:01.790] [bbotk] Starting to optimize 1 parameter(s) with '<OptimizerBatchRandomSearch>' and '<TerminatorEvals> [n_evals=20, k=0]'\nINFO  [19:03:01.813] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:01.821] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:02.229] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:02.610] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:02.989] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:03.597] [mlr3] Finished benchmark\nINFO  [19:03:03.617] [bbotk] Result of batch 1:\nINFO  [19:03:03.618] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:03.618] [bbotk]  10     0.07094088        0      0            0.468\nINFO  [19:03:03.618] [bbotk]                                 uhash\nINFO  [19:03:03.618] [bbotk]  1c1fa594-9897-4a2e-928d-79bc6a1938ec\nINFO  [19:03:03.621] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:03.625] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:03.919] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:04.020] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:04.184] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:04.328] [mlr3] Finished benchmark\nINFO  [19:03:04.344] [bbotk] Result of batch 2:\nINFO  [19:03:04.345] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:04.345] [bbotk]  43     0.07837772        0      0            0.417\nINFO  [19:03:04.345] [bbotk]                                 uhash\nINFO  [19:03:04.345] [bbotk]  4222e52b-74e6-4873-be67-f11f347984db\nINFO  [19:03:04.348] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:04.351] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:04.521] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:04.687] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:04.853] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:04.959] [mlr3] Finished benchmark\nINFO  [19:03:04.975] [bbotk] Result of batch 3:\nINFO  [19:03:04.976] [bbotk]  k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:04.976] [bbotk]  9     0.07123483        0      0            0.316\nINFO  [19:03:04.976] [bbotk]                                 uhash\nINFO  [19:03:04.976] [bbotk]  6da223a6-8559-4a38-8ba7-232986c8a3d9\nINFO  [19:03:04.979] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:04.983] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:05.149] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:05.318] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:05.490] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:05.632] [mlr3] Finished benchmark\nINFO  [19:03:05.649] [bbotk] Result of batch 4:\nINFO  [19:03:05.650] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:05.650] [bbotk]  48     0.07959143        0      0             0.43\nINFO  [19:03:05.650] [bbotk]                                 uhash\nINFO  [19:03:05.650] [bbotk]  db7db57c-4c88-4a75-b232-497bdbbf65e8\nINFO  [19:03:05.654] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:05.658] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:05.824] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:05.994] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:06.158] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:06.304] [mlr3] Finished benchmark\nINFO  [19:03:06.320] [bbotk] Result of batch 5:\nINFO  [19:03:06.321] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:06.321] [bbotk]  40     0.07761558        0      0            0.422\nINFO  [19:03:06.321] [bbotk]                                 uhash\nINFO  [19:03:06.321] [bbotk]  beaaa03c-a915-48ce-9fd6-ced20436f97f\nINFO  [19:03:06.324] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:06.328] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:06.499] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:06.671] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:06.831] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:06.967] [mlr3] Finished benchmark\nINFO  [19:03:06.982] [bbotk] Result of batch 6:\nINFO  [19:03:06.984] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:06.984] [bbotk]  17     0.07107682        0      0            0.381\nINFO  [19:03:06.984] [bbotk]                                 uhash\nINFO  [19:03:06.984] [bbotk]  290f84c2-b7f1-45b3-9092-dc5678c59a47\nINFO  [19:03:06.987] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:06.990] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:07.164] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:07.331] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:07.498] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:07.612] [mlr3] Finished benchmark\nINFO  [19:03:07.629] [bbotk] Result of batch 7:\nINFO  [19:03:07.635] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:07.635] [bbotk]  14     0.07060497        0      0            0.414\nINFO  [19:03:07.635] [bbotk]                                 uhash\nINFO  [19:03:07.635] [bbotk]  c20ba02b-e764-43ac-ba1a-ec3cc6292d07\nINFO  [19:03:07.640] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:07.643] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:07.819] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:07.982] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:08.150] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:08.276] [mlr3] Finished benchmark\nINFO  [19:03:08.293] [bbotk] Result of batch 8:\nINFO  [19:03:08.295] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:08.295] [bbotk]  26     0.07374879        0      0            0.374\nINFO  [19:03:08.295] [bbotk]                                 uhash\nINFO  [19:03:08.295] [bbotk]  51b26a68-948f-4dff-8302-cc8199270808\nINFO  [19:03:08.298] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:08.301] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:08.472] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:08.637] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:08.803] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:08.973] [mlr3] Finished benchmark\nINFO  [19:03:08.989] [bbotk] Result of batch 9:\nINFO  [19:03:08.990] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:08.990] [bbotk]  39     0.07735411        0      0            0.509\nINFO  [19:03:08.990] [bbotk]                                 uhash\nINFO  [19:03:08.990] [bbotk]  cc423b06-ecca-4757-8196-71359c2f1e0c\nINFO  [19:03:08.993] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:08.996] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:09.165] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:09.352] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:09.521] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:09.652] [mlr3] Finished benchmark\nINFO  [19:03:09.669] [bbotk] Result of batch 10:\nINFO  [19:03:09.671] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:09.671] [bbotk]  26     0.07374879        0      0              0.4\nINFO  [19:03:09.671] [bbotk]                                 uhash\nINFO  [19:03:09.671] [bbotk]  57160943-4595-4744-9c5b-1d07119fdc7e\nINFO  [19:03:09.674] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:09.678] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:09.849] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:10.013] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:10.185] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:10.401] [mlr3] Finished benchmark\nINFO  [19:03:10.417] [bbotk] Result of batch 11:\nINFO  [19:03:10.418] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:10.418] [bbotk]  47     0.07935006        0      0            0.505\nINFO  [19:03:10.418] [bbotk]                                 uhash\nINFO  [19:03:10.418] [bbotk]  f90eae11-1d62-41e8-b14e-2df9f868443c\nINFO  [19:03:10.422] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:10.428] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:10.596] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:10.762] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:10.928] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:11.042] [mlr3] Finished benchmark\nINFO  [19:03:11.063] [bbotk] Result of batch 12:\nINFO  [19:03:11.064] [bbotk]  k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:11.064] [bbotk]  7      0.0726565        0      0            0.395\nINFO  [19:03:11.064] [bbotk]                                 uhash\nINFO  [19:03:11.064] [bbotk]  be780f6c-004a-4f8e-89b1-c29fa95f20e3\nINFO  [19:03:11.067] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:11.071] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:11.236] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:11.401] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:11.564] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:11.669] [mlr3] Finished benchmark\nINFO  [19:03:11.689] [bbotk] Result of batch 13:\nINFO  [19:03:11.691] [bbotk]  k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:11.691] [bbotk]  5     0.07622049        0      0            0.313\nINFO  [19:03:11.691] [bbotk]                                 uhash\nINFO  [19:03:11.691] [bbotk]  870cc177-0719-4537-8fd7-778e34c7bb22\nINFO  [19:03:11.694] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:11.697] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:11.870] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:12.034] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:12.204] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:12.354] [mlr3] Finished benchmark\nINFO  [19:03:12.369] [bbotk] Result of batch 14:\nINFO  [19:03:12.371] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:12.371] [bbotk]  48     0.07959143        0      0             0.42\nINFO  [19:03:12.371] [bbotk]                                 uhash\nINFO  [19:03:12.371] [bbotk]  aa704a39-54ab-4ff0-bf43-720983b95ddd\nINFO  [19:03:12.374] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:12.377] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:12.546] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:12.706] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:12.875] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:12.997] [mlr3] Finished benchmark\nINFO  [19:03:13.013] [bbotk] Result of batch 15:\nINFO  [19:03:13.014] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:13.014] [bbotk]  22     0.07244712        0      0            0.362\nINFO  [19:03:13.014] [bbotk]                                 uhash\nINFO  [19:03:13.014] [bbotk]  c93a5cea-f1d9-485a-809c-50465cb6a673\nINFO  [19:03:13.017] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:13.021] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:13.185] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:13.354] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:13.516] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:13.624] [mlr3] Finished benchmark\nINFO  [19:03:13.640] [bbotk] Result of batch 16:\nINFO  [19:03:13.641] [bbotk]  k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:13.641] [bbotk]  6     0.07414824        0      0            0.319\nINFO  [19:03:13.641] [bbotk]                                 uhash\nINFO  [19:03:13.641] [bbotk]  f87fb895-dc1a-411a-a754-cb64e9f9a7d8\nINFO  [19:03:13.644] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:13.648] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:13.813] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:13.982] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:14.145] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:14.280] [mlr3] Finished benchmark\nINFO  [19:03:14.297] [bbotk] Result of batch 17:\nINFO  [19:03:14.298] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:14.298] [bbotk]  38     0.07709234        0      0            0.402\nINFO  [19:03:14.298] [bbotk]                                 uhash\nINFO  [19:03:14.298] [bbotk]  c116bebd-0f44-4b16-880f-cc51bbb79704\nINFO  [19:03:14.302] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:14.305] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:14.475] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:14.715] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:14.808] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:14.963] [mlr3] Finished benchmark\nINFO  [19:03:15.119] [bbotk] Result of batch 18:\nINFO  [19:03:15.120] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:15.120] [bbotk]  49     0.07982741        0      0            0.444\nINFO  [19:03:15.120] [bbotk]                                 uhash\nINFO  [19:03:15.120] [bbotk]  0fb320d1-a180-4d54-bc38-de3ec8e621c1\nINFO  [19:03:15.123] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:15.126] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:15.293] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:15.457] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:15.622] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:15.752] [mlr3] Finished benchmark\nINFO  [19:03:15.768] [bbotk] Result of batch 19:\nINFO  [19:03:15.769] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:15.769] [bbotk]  30     0.07496547        0      0            0.385\nINFO  [19:03:15.769] [bbotk]                                 uhash\nINFO  [19:03:15.769] [bbotk]  51d5478f-5376-4994-978b-613641451177\nINFO  [19:03:15.772] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:15.776] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:15.942] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:16.110] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:16.276] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:16.402] [mlr3] Finished benchmark\nINFO  [19:03:16.418] [bbotk] Result of batch 20:\nINFO  [19:03:16.419] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:16.419] [bbotk]  26     0.07374879        0      0            0.376\nINFO  [19:03:16.419] [bbotk]                                 uhash\nINFO  [19:03:16.419] [bbotk]  64c38d39-a100-4d96-8a08-b49836a8a3a1\nINFO  [19:03:16.428] [bbotk] Finished optimizing after 20 evaluation(s)\nINFO  [19:03:16.429] [bbotk] Result:\nINFO  [19:03:16.430] [bbotk]      k learner_param_vals  x_domain classif.bbrier\nINFO  [19:03:16.430] [bbotk]  <int>             <list>    <list>          <num>\nINFO  [19:03:16.430] [bbotk]     14          <list[1]> <list[1]>     0.07060497\n```\n\n\n:::\n:::\n\n\nIn this case, we get a `k` of 9, with an accuracy of about 90%.\n\n(Side task: Try the same but with the AUC measure --- do you get the same `k`?)\n\nWe can visualize the performance across all values of `k` we tried by accessing the tuning instance now included in the `tuned_knn` learner object:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nautoplot(tuned_knn$tuning_instance)\n```\n\n::: {.cell-output-display}\n![](03-tuning-svm_files/figure-html/plot-knn-tuning-result-1.png){width=672}\n:::\n\n```{.r .cell-code}\ntuned_knn$tuning_instance\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n── <TuningInstanceBatchSingleCrit> ─────────────────────────────────────────────\n• State: Optimized\n• Objective: <ObjectiveTuningBatch>\n• Search Space:\n       id    class lower upper nlevels\n   <char>   <char> <num> <num>   <num>\n1:      k ParamInt     3    51      49\n• Terminator: <TerminatorEvals> (n_evals=20, k=0)\n• Result:\n       k classif.bbrier\n   <int>          <num>\n1:    14     0.07060497\n• Archive:\n    classif.bbrier     k\n             <num> <int>\n 1:           0.07    10\n 2:           0.08    43\n 3:           0.07     9\n 4:           0.08    48\n 5:           0.08    40\n 6:           0.07    17\n 7:           0.07    14\n 8:           0.07    26\n 9:           0.08    39\n10:           0.07    26\n11:           0.08    47\n12:           0.07     7\n13:           0.08     5\n14:           0.08    48\n15:           0.07    22\n16:           0.07     6\n17:           0.08    38\n18:           0.08    49\n19:           0.07    30\n20:           0.07    26\n    classif.bbrier     k\n```\n\n\n:::\n:::\n\n\n(See also docs at `?mlr3viz:::autoplot.TuningInstanceSingleCrit`)\n\nAnd we can get the hyperparameter results that worked best in the end:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntuned_knn$tuning_result\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n       k learner_param_vals  x_domain classif.bbrier\n   <int>             <list>    <list>          <num>\n1:    14          <list[1]> <list[1]>     0.07060497\n```\n\n\n:::\n:::\n\n\nNow that we've tuned on the training set, it's time to evaluate on the test set:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntuned_knn_pred <- tuned_knn$predict(spam_task, row_ids = spam_split$test)\n\n# Accuracy and AUC\ntuned_knn_pred$score(msrs(c(\"classif.acc\", \"classif.auc\", \"classif.bbrier\")))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   classif.acc    classif.auc classif.bbrier \n    0.90482399     0.96285949     0.07076836 \n```\n\n\n:::\n:::\n\n\nThat was basically the manual way of doing nested resampling with an inner resampling strategy (CV) and an outer resampling strategy of holdout (the `spam_train` and `spam_test` sets).\n\nIn the next step we're going to compare the knn learner with the decision tree learner, and for that we need a proper nested resampling:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Set up the knn autotuner again\ntuned_knn <- auto_tuner(\n  # The base learner we want to tune, optionally setting other parameters\n  learner = lrn(\"classif.kknn\", predict_type = \"prob\"),\n  # Resampling strategy for the tuning (inner resampling)\n  resampling = rsmp(\"cv\", folds = 3),\n  # Tuning measure: Maximize the classification accuracy\n  measure = msr(\"classif.bbrier\"),\n  # Setting the search space we defined above\n  search_space = ps(k = p_int(lower = 3, upper = 51)),\n  # Budget: Try n_evals different values\n  terminator = trm(\"evals\", n_evals = 20),\n  # Strategy: Randomly try parameter values in the space\n  # (not ideal in this case but in general a good place to start)\n  tuner = tnr(\"random_search\")\n)\n\n# Set up resampling with the ready-to-be-tuned learner and outer resampling: CV\nknn_nested_tune <- resample(\n  task = spam_task, \n  learner = tuned_knn, \n  resampling = rsmp(\"cv\", folds = 3), # this is effectively the outer resampling\n  store_models = TRUE\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nINFO  [19:03:17.156] [mlr3] Applying learner 'classif.kknn.tuned' on task 'spam' (iter 1/3)\nINFO  [19:03:17.201] [bbotk] Starting to optimize 1 parameter(s) with '<OptimizerBatchRandomSearch>' and '<TerminatorEvals> [n_evals=20, k=0]'\nINFO  [19:03:17.209] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:17.214] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:17.224] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:17.349] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:17.463] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:17.580] [mlr3] Finished benchmark\nINFO  [19:03:17.601] [bbotk] Result of batch 1:\nINFO  [19:03:17.603] [bbotk]  k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:17.603] [bbotk]  4     0.08405356        0      0            0.334\nINFO  [19:03:17.603] [bbotk]                                 uhash\nINFO  [19:03:17.603] [bbotk]  c1878fa0-5e41-40e6-8665-ec5dc2e8d1d6\nINFO  [19:03:17.607] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:17.610] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:17.619] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:17.774] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:17.925] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:18.075] [mlr3] Finished benchmark\nINFO  [19:03:18.092] [bbotk] Result of batch 2:\nINFO  [19:03:18.093] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:18.093] [bbotk]  48     0.07944364        0      0            0.438\nINFO  [19:03:18.093] [bbotk]                                 uhash\nINFO  [19:03:18.093] [bbotk]  9dc8385d-bbfe-4f89-8937-46d5d48a1d05\nINFO  [19:03:18.097] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:18.100] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:18.105] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:18.310] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:18.444] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:18.577] [mlr3] Finished benchmark\nINFO  [19:03:18.593] [bbotk] Result of batch 3:\nINFO  [19:03:18.594] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:18.594] [bbotk]  24     0.07430886        0      0            0.453\nINFO  [19:03:18.594] [bbotk]                                 uhash\nINFO  [19:03:18.594] [bbotk]  84cc37cf-60d7-41dc-a940-dff0e3c53202\nINFO  [19:03:18.597] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:18.601] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:18.606] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:18.729] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:18.854] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:18.978] [mlr3] Finished benchmark\nINFO  [19:03:18.993] [bbotk] Result of batch 4:\nINFO  [19:03:18.994] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:18.994] [bbotk]  17     0.07303816        0      0            0.354\nINFO  [19:03:18.994] [bbotk]                                 uhash\nINFO  [19:03:18.994] [bbotk]  41cbf683-2ac7-45a9-a1d5-937ff9576c34\nINFO  [19:03:18.997] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:19.000] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:19.005] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:19.149] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:19.287] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:19.430] [mlr3] Finished benchmark\nINFO  [19:03:19.451] [bbotk] Result of batch 5:\nINFO  [19:03:19.452] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:19.452] [bbotk]  39     0.07758321        0      0            0.406\nINFO  [19:03:19.452] [bbotk]                                 uhash\nINFO  [19:03:19.452] [bbotk]  426aec86-fd03-43ba-9441-02e58398877d\nINFO  [19:03:19.456] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:19.459] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:19.464] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:19.611] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:19.758] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:19.909] [mlr3] Finished benchmark\nINFO  [19:03:19.925] [bbotk] Result of batch 6:\nINFO  [19:03:19.926] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:19.926] [bbotk]  46     0.07904458        0      0            0.427\nINFO  [19:03:19.926] [bbotk]                                 uhash\nINFO  [19:03:19.926] [bbotk]  e6b01050-abfe-4876-aa11-3f16cc83fbe8\nINFO  [19:03:19.929] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:19.932] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:19.937] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:20.085] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:20.231] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:20.377] [mlr3] Finished benchmark\nINFO  [19:03:20.393] [bbotk] Result of batch 7:\nINFO  [19:03:20.394] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:20.394] [bbotk]  42     0.07821732        0      0             0.42\nINFO  [19:03:20.394] [bbotk]                                 uhash\nINFO  [19:03:20.394] [bbotk]  9852c7d2-7cd8-47cd-92aa-6883157f6bc9\nINFO  [19:03:20.397] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:20.401] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:20.405] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:20.549] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:20.688] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:20.826] [mlr3] Finished benchmark\nINFO  [19:03:20.841] [bbotk] Result of batch 8:\nINFO  [19:03:20.843] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:20.843] [bbotk]  29     0.07540775        0      0            0.403\nINFO  [19:03:20.843] [bbotk]                                 uhash\nINFO  [19:03:20.843] [bbotk]  50147ff7-8324-4ada-9431-c6b0aabc2527\nINFO  [19:03:20.846] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:20.849] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:20.854] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:21.001] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:21.222] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:21.362] [mlr3] Finished benchmark\nINFO  [19:03:21.379] [bbotk] Result of batch 9:\nINFO  [19:03:21.380] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:21.380] [bbotk]  38     0.07735664        0      0             0.49\nINFO  [19:03:21.380] [bbotk]                                 uhash\nINFO  [19:03:21.380] [bbotk]  61fbde49-48f3-4897-acf6-f661f307f6c5\nINFO  [19:03:21.384] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:21.388] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:21.392] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:21.533] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:21.674] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:21.815] [mlr3] Finished benchmark\nINFO  [19:03:21.833] [bbotk] Result of batch 10:\nINFO  [19:03:21.834] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:21.834] [bbotk]  34     0.07650483        0      0            0.404\nINFO  [19:03:21.834] [bbotk]                                 uhash\nINFO  [19:03:21.834] [bbotk]  52fc638c-327b-4d13-a694-7829a58dbdc9\nINFO  [19:03:21.837] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:21.840] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:21.845] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:21.989] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:22.133] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:22.274] [mlr3] Finished benchmark\nINFO  [19:03:22.292] [bbotk] Result of batch 11:\nINFO  [19:03:22.293] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:22.293] [bbotk]  36     0.07693483        0      0            0.411\nINFO  [19:03:22.293] [bbotk]                                 uhash\nINFO  [19:03:22.293] [bbotk]  6469ff94-cb97-425f-8181-23eedaf6509d\nINFO  [19:03:22.297] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:22.300] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:22.305] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:22.460] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:22.615] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:22.764] [mlr3] Finished benchmark\nINFO  [19:03:22.780] [bbotk] Result of batch 12:\nINFO  [19:03:22.781] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:22.781] [bbotk]  48     0.07944364        0      0            0.439\nINFO  [19:03:22.781] [bbotk]                                 uhash\nINFO  [19:03:22.781] [bbotk]  409cd197-5d55-470c-bcfb-da0d689790ed\nINFO  [19:03:22.784] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:22.788] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:22.792] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:22.904] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:23.014] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:23.124] [mlr3] Finished benchmark\nINFO  [19:03:23.139] [bbotk] Result of batch 13:\nINFO  [19:03:23.140] [bbotk]  k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:23.140] [bbotk]  5     0.08076906        0      0            0.315\nINFO  [19:03:23.140] [bbotk]                                 uhash\nINFO  [19:03:23.140] [bbotk]  2a321e61-b253-4d53-a745-5f905e0e603e\nINFO  [19:03:23.146] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:23.149] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:23.154] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:23.281] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:23.481] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:23.605] [mlr3] Finished benchmark\nINFO  [19:03:23.621] [bbotk] Result of batch 14:\nINFO  [19:03:23.622] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:23.622] [bbotk]  25     0.07452225        0      0            0.435\nINFO  [19:03:23.622] [bbotk]                                 uhash\nINFO  [19:03:23.622] [bbotk]  a8a00375-ff46-495e-9860-a5c97433d437\nINFO  [19:03:23.626] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:23.629] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:23.634] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:23.759] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:23.884] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:24.010] [mlr3] Finished benchmark\nINFO  [19:03:24.025] [bbotk] Result of batch 15:\nINFO  [19:03:24.026] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:24.026] [bbotk]  22     0.07387853        0      0            0.359\nINFO  [19:03:24.026] [bbotk]                                 uhash\nINFO  [19:03:24.026] [bbotk]  0c242eda-dff3-4651-80e2-29f6d3f90144\nINFO  [19:03:24.029] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:24.032] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:24.036] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:24.162] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:24.286] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:24.406] [mlr3] Finished benchmark\nINFO  [19:03:24.424] [bbotk] Result of batch 16:\nINFO  [19:03:24.425] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:24.425] [bbotk]  19      0.0733302        0      0            0.354\nINFO  [19:03:24.425] [bbotk]                                 uhash\nINFO  [19:03:24.425] [bbotk]  c298e81a-715a-4aac-8b01-916ce00c9621\nINFO  [19:03:24.428] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:24.431] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:24.435] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:24.565] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:24.699] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:24.830] [mlr3] Finished benchmark\nINFO  [19:03:24.845] [bbotk] Result of batch 17:\nINFO  [19:03:24.846] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:24.846] [bbotk]  30     0.07562718        0      0             0.38\nINFO  [19:03:24.846] [bbotk]                                 uhash\nINFO  [19:03:24.846] [bbotk]  cecf5b11-8364-4e2d-bfc6-63db7d367dd5\nINFO  [19:03:24.849] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:24.852] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:24.856] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:24.992] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:25.127] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:25.330] [mlr3] Finished benchmark\nINFO  [19:03:25.345] [bbotk] Result of batch 18:\nINFO  [19:03:25.346] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:25.346] [bbotk]  33     0.07627762        0      0            0.456\nINFO  [19:03:25.346] [bbotk]                                 uhash\nINFO  [19:03:25.346] [bbotk]  5e807aad-e01d-4199-b1f7-2c3780080f29\nINFO  [19:03:25.349] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:25.352] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:25.357] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:25.475] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:25.593] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:25.712] [mlr3] Finished benchmark\nINFO  [19:03:25.727] [bbotk] Result of batch 19:\nINFO  [19:03:25.728] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:25.728] [bbotk]  16     0.07293843        0      0            0.339\nINFO  [19:03:25.728] [bbotk]                                 uhash\nINFO  [19:03:25.728] [bbotk]  90bfc803-6d27-4b7a-adb6-aa96cce2203e\nINFO  [19:03:25.731] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:25.734] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:25.739] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:25.842] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:25.947] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:26.127] [mlr3] Finished benchmark\nINFO  [19:03:26.142] [bbotk] Result of batch 20:\nINFO  [19:03:26.143] [bbotk]  k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:26.143] [bbotk]  3     0.08898447        0      0             0.37\nINFO  [19:03:26.143] [bbotk]                                 uhash\nINFO  [19:03:26.143] [bbotk]  d98a2815-708c-4c8e-8749-edda902e7cef\nINFO  [19:03:26.151] [bbotk] Finished optimizing after 20 evaluation(s)\nINFO  [19:03:26.152] [bbotk] Result:\nINFO  [19:03:26.153] [bbotk]      k learner_param_vals  x_domain classif.bbrier\nINFO  [19:03:26.153] [bbotk]  <int>             <list>    <list>          <num>\nINFO  [19:03:26.153] [bbotk]     16          <list[1]> <list[1]>     0.07293843\nINFO  [19:03:17.326] [mlr3] Applying learner 'classif.kknn.tuned' on task 'spam' (iter 2/3)\nINFO  [19:03:17.388] [bbotk] Starting to optimize 1 parameter(s) with '<OptimizerBatchRandomSearch>' and '<TerminatorEvals> [n_evals=20, k=0]'\nINFO  [19:03:17.397] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:17.402] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:17.412] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:17.547] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:17.674] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:17.802] [mlr3] Finished benchmark\nINFO  [19:03:17.822] [bbotk] Result of batch 1:\nINFO  [19:03:17.824] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:17.824] [bbotk]  16     0.07697195        0      0            0.366\nINFO  [19:03:17.824] [bbotk]                                 uhash\nINFO  [19:03:17.824] [bbotk]  db0905b9-ccd5-48ae-83ea-4eaee75a17c5\nINFO  [19:03:17.827] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:17.831] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:17.841] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:17.996] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:18.139] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:18.286] [mlr3] Finished benchmark\nINFO  [19:03:18.305] [bbotk] Result of batch 2:\nINFO  [19:03:18.306] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:18.306] [bbotk]  35     0.08129065        0      0            0.426\nINFO  [19:03:18.306] [bbotk]                                 uhash\nINFO  [19:03:18.306] [bbotk]  92ca2fe0-6b0b-446b-9497-923794589a63\nINFO  [19:03:18.309] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:18.312] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:18.317] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:18.472] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:18.698] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:18.839] [mlr3] Finished benchmark\nINFO  [19:03:18.858] [bbotk] Result of batch 3:\nINFO  [19:03:18.859] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:18.859] [bbotk]  42     0.08304848        0      0            0.503\nINFO  [19:03:18.859] [bbotk]                                 uhash\nINFO  [19:03:18.859] [bbotk]  35bb0bdd-b7dd-4a83-8fef-3be5d32e270f\nINFO  [19:03:18.862] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:18.866] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:18.870] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:19.000] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:19.132] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:19.262] [mlr3] Finished benchmark\nINFO  [19:03:19.277] [bbotk] Result of batch 4:\nINFO  [19:03:19.279] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:19.279] [bbotk]  24     0.07850712        0      0            0.374\nINFO  [19:03:19.279] [bbotk]                                 uhash\nINFO  [19:03:19.279] [bbotk]  170f7977-363f-4240-92ef-efd526afd5ad\nINFO  [19:03:19.282] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:19.285] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:19.290] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:19.427] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:19.558] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:19.687] [mlr3] Finished benchmark\nINFO  [19:03:19.703] [bbotk] Result of batch 5:\nINFO  [19:03:19.704] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:19.704] [bbotk]  19     0.07742363        0      0            0.379\nINFO  [19:03:19.704] [bbotk]                                 uhash\nINFO  [19:03:19.704] [bbotk]  578a4292-0706-4292-a1f7-802c0b7753ce\nINFO  [19:03:19.707] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:19.710] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:19.715] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:19.864] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:20.014] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:20.157] [mlr3] Finished benchmark\nINFO  [19:03:20.174] [bbotk] Result of batch 6:\nINFO  [19:03:20.175] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:20.175] [bbotk]  36     0.08154148        0      0            0.425\nINFO  [19:03:20.175] [bbotk]                                 uhash\nINFO  [19:03:20.175] [bbotk]  7b52af8a-900e-4fcb-865f-f994ce002553\nINFO  [19:03:20.178] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:20.181] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:20.186] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:20.339] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:20.492] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:20.717] [mlr3] Finished benchmark\nINFO  [19:03:20.733] [bbotk] Result of batch 7:\nINFO  [19:03:20.734] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:20.734] [bbotk]  45     0.08378264        0      0            0.513\nINFO  [19:03:20.734] [bbotk]                                 uhash\nINFO  [19:03:20.734] [bbotk]  679036b7-265d-4f21-9de5-3abc66ab0c46\nINFO  [19:03:20.737] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:20.740] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:20.745] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:20.883] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:21.020] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:21.154] [mlr3] Finished benchmark\nINFO  [19:03:21.171] [bbotk] Result of batch 8:\nINFO  [19:03:21.173] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:21.173] [bbotk]  25     0.07875933        0      0             0.39\nINFO  [19:03:21.173] [bbotk]                                 uhash\nINFO  [19:03:21.173] [bbotk]  921708bc-ec57-47d3-847f-341bd8ef3a56\nINFO  [19:03:21.177] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:21.181] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:21.186] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:21.332] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:21.476] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:21.617] [mlr3] Finished benchmark\nINFO  [19:03:21.633] [bbotk] Result of batch 9:\nINFO  [19:03:21.634] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:21.634] [bbotk]  35     0.08129065        0      0            0.413\nINFO  [19:03:21.634] [bbotk]                                 uhash\nINFO  [19:03:21.634] [bbotk]  3a4515da-496c-4170-b9f8-fab4b35e8929\nINFO  [19:03:21.637] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:21.641] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:21.645] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:21.856] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:21.984] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:22.114] [mlr3] Finished benchmark\nINFO  [19:03:22.131] [bbotk] Result of batch 10:\nINFO  [19:03:22.132] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:22.132] [bbotk]  20     0.07760917        0      0            0.452\nINFO  [19:03:22.132] [bbotk]                                 uhash\nINFO  [19:03:22.132] [bbotk]  fd2c33ce-ba68-4aa0-b18c-5c051cf1685d\nINFO  [19:03:22.135] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:22.139] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:22.144] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:22.277] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:22.408] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:22.547] [mlr3] Finished benchmark\nINFO  [19:03:22.564] [bbotk] Result of batch 11:\nINFO  [19:03:22.565] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:22.565] [bbotk]  20     0.07760917        0      0            0.385\nINFO  [19:03:22.565] [bbotk]                                 uhash\nINFO  [19:03:22.565] [bbotk]  e17ce37d-3754-420c-8726-379f7afea119\nINFO  [19:03:22.569] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:22.572] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:22.577] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:22.728] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:22.881] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:23.033] [mlr3] Finished benchmark\nINFO  [19:03:23.050] [bbotk] Result of batch 12:\nINFO  [19:03:23.051] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:23.051] [bbotk]  42     0.08304848        0      0            0.436\nINFO  [19:03:23.051] [bbotk]                                 uhash\nINFO  [19:03:23.051] [bbotk]  71c24002-41dd-4e2d-9ebc-bf9232ed3679\nINFO  [19:03:23.054] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:23.058] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:23.063] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:23.207] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:23.352] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:23.491] [mlr3] Finished benchmark\nINFO  [19:03:23.511] [bbotk] Result of batch 13:\nINFO  [19:03:23.512] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:23.512] [bbotk]  32     0.08054007        0      0             0.41\nINFO  [19:03:23.512] [bbotk]                                 uhash\nINFO  [19:03:23.512] [bbotk]  0cc76960-40c4-4834-9d3b-ccc4dbf4e5b5\nINFO  [19:03:23.515] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:23.519] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:23.523] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:23.666] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:23.809] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:24.019] [mlr3] Finished benchmark\nINFO  [19:03:24.036] [bbotk] Result of batch 14:\nINFO  [19:03:24.037] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:24.037] [bbotk]  29     0.07975371        0      0            0.479\nINFO  [19:03:24.037] [bbotk]                                 uhash\nINFO  [19:03:24.037] [bbotk]  1b27c127-f0b2-4600-85a7-3152e1310f56\nINFO  [19:03:24.040] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:24.044] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:24.048] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:24.179] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:24.308] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:24.434] [mlr3] Finished benchmark\nINFO  [19:03:24.450] [bbotk] Result of batch 15:\nINFO  [19:03:24.451] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:24.451] [bbotk]  17     0.07710579        0      0            0.367\nINFO  [19:03:24.451] [bbotk]                                 uhash\nINFO  [19:03:24.451] [bbotk]  4a4634b5-4fe3-4eb1-972f-eea07d14f001\nINFO  [19:03:24.454] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:24.458] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:24.463] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:24.619] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:24.770] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:24.921] [mlr3] Finished benchmark\nINFO  [19:03:24.938] [bbotk] Result of batch 16:\nINFO  [19:03:24.939] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:24.939] [bbotk]  49     0.08473147        0      0             0.44\nINFO  [19:03:24.939] [bbotk]                                 uhash\nINFO  [19:03:24.939] [bbotk]  12031941-27f1-4431-adeb-092a2a375516\nINFO  [19:03:24.942] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:24.946] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:24.951] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:25.081] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:25.211] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:25.337] [mlr3] Finished benchmark\nINFO  [19:03:25.353] [bbotk] Result of batch 17:\nINFO  [19:03:25.354] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:25.354] [bbotk]  17     0.07710579        0      0             0.37\nINFO  [19:03:25.354] [bbotk]                                 uhash\nINFO  [19:03:25.354] [bbotk]  e4b445ed-6f85-4136-8e91-a15feb909971\nINFO  [19:03:25.358] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:25.361] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:25.366] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:25.514] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:25.662] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:25.811] [mlr3] Finished benchmark\nINFO  [19:03:25.827] [bbotk] Result of batch 18:\nINFO  [19:03:25.828] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:25.828] [bbotk]  41     0.08279545        0      0            0.426\nINFO  [19:03:25.828] [bbotk]                                 uhash\nINFO  [19:03:25.828] [bbotk]  5a0eb0ec-a0fe-46c3-8f5c-9996aabbc5ba\nINFO  [19:03:25.832] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:25.835] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:25.840] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:25.971] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:26.107] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:26.237] [mlr3] Finished benchmark\nINFO  [19:03:26.254] [bbotk] Result of batch 19:\nINFO  [19:03:26.255] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:26.255] [bbotk]  19     0.07742363        0      0             0.38\nINFO  [19:03:26.255] [bbotk]                                 uhash\nINFO  [19:03:26.255] [bbotk]  eac3e68f-cd3d-46e6-9732-ef5c61dd7e36\nINFO  [19:03:26.259] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:26.262] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:26.266] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:26.414] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:26.559] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:26.771] [mlr3] Finished benchmark\nINFO  [19:03:26.787] [bbotk] Result of batch 20:\nINFO  [19:03:26.789] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:26.789] [bbotk]  40     0.08254909        0      0             0.49\nINFO  [19:03:26.789] [bbotk]                                 uhash\nINFO  [19:03:26.789] [bbotk]  69c35b7d-d839-422a-90b6-6cbc2b2ccc29\nINFO  [19:03:26.798] [bbotk] Finished optimizing after 20 evaluation(s)\nINFO  [19:03:26.798] [bbotk] Result:\nINFO  [19:03:26.799] [bbotk]      k learner_param_vals  x_domain classif.bbrier\nINFO  [19:03:26.799] [bbotk]  <int>             <list>    <list>          <num>\nINFO  [19:03:26.799] [bbotk]     16          <list[1]> <list[1]>     0.07697195\nINFO  [19:03:17.506] [mlr3] Applying learner 'classif.kknn.tuned' on task 'spam' (iter 3/3)\nINFO  [19:03:17.550] [bbotk] Starting to optimize 1 parameter(s) with '<OptimizerBatchRandomSearch>' and '<TerminatorEvals> [n_evals=20, k=0]'\nINFO  [19:03:17.560] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:17.565] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:17.574] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:17.713] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:17.839] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:17.968] [mlr3] Finished benchmark\nINFO  [19:03:17.986] [bbotk] Result of batch 1:\nINFO  [19:03:17.988] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:17.988] [bbotk]  16     0.07421055        0      0            0.372\nINFO  [19:03:17.988] [bbotk]                                 uhash\nINFO  [19:03:17.988] [bbotk]  c9c6a7ea-ff27-4ba1-b240-31942f4a812a\nINFO  [19:03:17.992] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:17.995] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:18.005] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:18.144] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:18.274] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:18.413] [mlr3] Finished benchmark\nINFO  [19:03:18.431] [bbotk] Result of batch 2:\nINFO  [19:03:18.432] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:18.432] [bbotk]  21      0.0750489        0      0            0.385\nINFO  [19:03:18.432] [bbotk]                                 uhash\nINFO  [19:03:18.432] [bbotk]  8d68cec1-8373-4485-8057-4f0818dc5ddc\nINFO  [19:03:18.436] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:18.439] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:18.444] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:18.664] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:18.799] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:18.933] [mlr3] Finished benchmark\nINFO  [19:03:18.953] [bbotk] Result of batch 3:\nINFO  [19:03:18.954] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:18.954] [bbotk]  31     0.07750324        0      0            0.474\nINFO  [19:03:18.954] [bbotk]                                 uhash\nINFO  [19:03:18.954] [bbotk]  7541adaf-7884-4e77-a83f-4d5218976e65\nINFO  [19:03:18.957] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:18.961] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:18.965] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:19.073] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:19.181] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:19.290] [mlr3] Finished benchmark\nINFO  [19:03:19.307] [bbotk] Result of batch 4:\nINFO  [19:03:19.308] [bbotk]  k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:19.308] [bbotk]  3     0.08823857        0      0            0.308\nINFO  [19:03:19.308] [bbotk]                                 uhash\nINFO  [19:03:19.308] [bbotk]  98e0628c-c870-4905-bb55-ec017e07a821\nINFO  [19:03:19.312] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:19.315] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:19.320] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:19.458] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:19.589] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:19.722] [mlr3] Finished benchmark\nINFO  [19:03:19.740] [bbotk] Result of batch 5:\nINFO  [19:03:19.741] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:19.741] [bbotk]  32     0.07774296        0      0            0.385\nINFO  [19:03:19.741] [bbotk]                                 uhash\nINFO  [19:03:19.741] [bbotk]  19ff288f-ec5a-4a3c-95a7-c7f89ccc0cfb\nINFO  [19:03:19.743] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:19.747] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:19.751] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:19.879] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:20.002] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:20.125] [mlr3] Finished benchmark\nINFO  [19:03:20.140] [bbotk] Result of batch 6:\nINFO  [19:03:20.141] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:20.141] [bbotk]  21      0.0750489        0      0            0.356\nINFO  [19:03:20.141] [bbotk]                                 uhash\nINFO  [19:03:20.141] [bbotk]  2f255491-fcc4-43d6-af25-b52d6d689756\nINFO  [19:03:20.144] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:20.147] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:20.152] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:20.267] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:20.377] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:20.492] [mlr3] Finished benchmark\nINFO  [19:03:20.508] [bbotk] Result of batch 7:\nINFO  [19:03:20.509] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:20.509] [bbotk]  10     0.07462014        0      0            0.324\nINFO  [19:03:20.509] [bbotk]                                 uhash\nINFO  [19:03:20.509] [bbotk]  eeeb1995-0874-4589-83ae-484b67e7ff33\nINFO  [19:03:20.512] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:20.515] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:20.520] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:20.651] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:20.765] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:20.885] [mlr3] Finished benchmark\nINFO  [19:03:20.900] [bbotk] Result of batch 8:\nINFO  [19:03:20.901] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:20.901] [bbotk]  14     0.07406681        0      0            0.346\nINFO  [19:03:20.901] [bbotk]                                 uhash\nINFO  [19:03:20.901] [bbotk]  7b67f623-5920-4be5-bdd7-b8187cfc1598\nINFO  [19:03:20.904] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:20.907] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:20.911] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:21.048] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:21.183] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:21.321] [mlr3] Finished benchmark\nINFO  [19:03:21.336] [bbotk] Result of batch 9:\nINFO  [19:03:21.337] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:21.337] [bbotk]  32     0.07774296        0      0             0.39\nINFO  [19:03:21.337] [bbotk]                                 uhash\nINFO  [19:03:21.337] [bbotk]  94bee43c-59df-4696-87d8-a78349eb1a74\nINFO  [19:03:21.340] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:21.343] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:21.347] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:21.483] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:21.614] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:21.748] [mlr3] Finished benchmark\nINFO  [19:03:21.763] [bbotk] Result of batch 10:\nINFO  [19:03:21.764] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:21.764] [bbotk]  29     0.07700446        0      0            0.386\nINFO  [19:03:21.764] [bbotk]                                 uhash\nINFO  [19:03:21.764] [bbotk]  bf14fd53-0088-41d7-8e54-bc3616781284\nINFO  [19:03:21.767] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:21.770] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:21.774] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:21.897] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:22.009] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:22.128] [mlr3] Finished benchmark\nINFO  [19:03:22.144] [bbotk] Result of batch 11:\nINFO  [19:03:22.145] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:22.145] [bbotk]  12     0.07418267        0      0            0.337\nINFO  [19:03:22.145] [bbotk]                                 uhash\nINFO  [19:03:22.145] [bbotk]  7f6e1b6a-1053-4b2a-9fb3-ad103314d251\nINFO  [19:03:22.148] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:22.151] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:22.156] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:22.293] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:22.499] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:22.635] [mlr3] Finished benchmark\nINFO  [19:03:22.649] [bbotk] Result of batch 12:\nINFO  [19:03:22.651] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:22.651] [bbotk]  31     0.07750324        0      0            0.461\nINFO  [19:03:22.651] [bbotk]                                 uhash\nINFO  [19:03:22.651] [bbotk]  81fdf4b3-e6e2-4470-8eba-224333e6a894\nINFO  [19:03:22.653] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:22.657] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:22.661] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:22.778] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:22.898] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:23.019] [mlr3] Finished benchmark\nINFO  [19:03:23.036] [bbotk] Result of batch 13:\nINFO  [19:03:23.038] [bbotk]  k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:23.038] [bbotk]  8     0.07572681        0      0            0.337\nINFO  [19:03:23.038] [bbotk]                                 uhash\nINFO  [19:03:23.038] [bbotk]  4cd73e79-006b-4f0e-8b2f-ce3c3d332dd0\nINFO  [19:03:23.041] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:23.044] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:23.049] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:23.186] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:23.317] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:23.449] [mlr3] Finished benchmark\nINFO  [19:03:23.466] [bbotk] Result of batch 14:\nINFO  [19:03:23.467] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:23.467] [bbotk]  22      0.0752647        0      0            0.383\nINFO  [19:03:23.467] [bbotk]                                 uhash\nINFO  [19:03:23.467] [bbotk]  11b02626-4490-492c-b0e0-1e687f984011\nINFO  [19:03:23.471] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:23.474] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:23.482] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:23.630] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:23.778] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:23.928] [mlr3] Finished benchmark\nINFO  [19:03:23.946] [bbotk] Result of batch 15:\nINFO  [19:03:23.948] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:23.948] [bbotk]  46     0.08077143        0      0            0.428\nINFO  [19:03:23.948] [bbotk]                                 uhash\nINFO  [19:03:23.948] [bbotk]  a4f8fd27-febe-4a9f-a77d-a77e3e8a88e4\nINFO  [19:03:23.951] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:23.954] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:23.959] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:24.077] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:24.194] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:24.315] [mlr3] Finished benchmark\nINFO  [19:03:24.332] [bbotk] Result of batch 16:\nINFO  [19:03:24.333] [bbotk]  k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:24.333] [bbotk]  8     0.07572681        0      0            0.332\nINFO  [19:03:24.333] [bbotk]                                 uhash\nINFO  [19:03:24.333] [bbotk]  ecb4271c-004b-4ad8-b9ab-e040dc5ad005\nINFO  [19:03:24.336] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:24.340] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:24.344] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:24.484] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:24.623] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:24.764] [mlr3] Finished benchmark\nINFO  [19:03:24.782] [bbotk] Result of batch 17:\nINFO  [19:03:24.783] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:24.783] [bbotk]  32     0.07774296        0      0            0.402\nINFO  [19:03:24.783] [bbotk]                                 uhash\nINFO  [19:03:24.783] [bbotk]  f053210c-d307-4014-ae1a-ef3f78cc4fdf\nINFO  [19:03:24.786] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:24.790] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:24.795] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:24.941] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:25.090] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:25.231] [mlr3] Finished benchmark\nINFO  [19:03:25.251] [bbotk] Result of batch 18:\nINFO  [19:03:25.252] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:25.252] [bbotk]  35     0.07844094        0      0            0.417\nINFO  [19:03:25.252] [bbotk]                                 uhash\nINFO  [19:03:25.252] [bbotk]  fa7ca29f-30fc-4539-96a1-a2cbac074fd1\nINFO  [19:03:25.255] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:25.259] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:25.263] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:25.407] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:25.551] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:25.698] [mlr3] Finished benchmark\nINFO  [19:03:25.717] [bbotk] Result of batch 19:\nINFO  [19:03:25.719] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:25.719] [bbotk]  40     0.07952833        0      0            0.417\nINFO  [19:03:25.719] [bbotk]                                 uhash\nINFO  [19:03:25.719] [bbotk]  a95ba262-6272-44f5-818b-eee9ed0ce8cd\nINFO  [19:03:25.722] [bbotk] Evaluating 1 configuration(s)\nINFO  [19:03:25.725] [mlr3] Running benchmark with 3 resampling iterations\nINFO  [19:03:25.730] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 1/3)\nINFO  [19:03:25.861] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 2/3)\nINFO  [19:03:25.987] [mlr3] Applying learner 'classif.kknn' on task 'spam' (iter 3/3)\nINFO  [19:03:26.119] [mlr3] Finished benchmark\nINFO  [19:03:26.136] [bbotk] Result of batch 20:\nINFO  [19:03:26.138] [bbotk]   k classif.bbrier warnings errors runtime_learners\nINFO  [19:03:26.138] [bbotk]  17     0.07433331        0      0            0.371\nINFO  [19:03:26.138] [bbotk]                                 uhash\nINFO  [19:03:26.138] [bbotk]  b8c52997-5b74-4def-bcbe-48dfde5211fc\nINFO  [19:03:26.147] [bbotk] Finished optimizing after 20 evaluation(s)\nINFO  [19:03:26.147] [bbotk] Result:\nINFO  [19:03:26.149] [bbotk]      k learner_param_vals  x_domain classif.bbrier\nINFO  [19:03:26.149] [bbotk]  <int>             <list>    <list>          <num>\nINFO  [19:03:26.149] [bbotk]     14          <list[1]> <list[1]>     0.07406681\n```\n\n\n:::\n\n```{.r .cell-code}\n# Extract inner tuning results, since we now tuned in multiple CV folds\n# Folds might conclude different optimal k\n# AUC is averaged over inner folds\nextract_inner_tuning_results(knn_nested_tune)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   iteration     k classif.bbrier learner_param_vals  x_domain task_id\n       <int> <int>          <num>             <list>    <list>  <char>\n1:         1    16     0.07293843          <list[1]> <list[1]>    spam\n2:         2    16     0.07697195          <list[1]> <list[1]>    spam\n3:         3    14     0.07406681          <list[1]> <list[1]>    spam\n           learner_id resampling_id\n               <char>        <char>\n1: classif.kknn.tuned            cv\n2: classif.kknn.tuned            cv\n3: classif.kknn.tuned            cv\n```\n\n\n:::\n\n```{.r .cell-code}\n# Above combined individual results also accessible via e.g.\nknn_nested_tune$learners[[2]]$tuning_result\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n       k learner_param_vals  x_domain classif.bbrier\n   <int>             <list>    <list>          <num>\n1:    16          <list[1]> <list[1]>     0.07697195\n```\n\n\n:::\n\n```{.r .cell-code}\n# Plot of inner folds\nautoplot(knn_nested_tune$learners[[1]]$tuning_instance)\n```\n\n::: {.cell-output-display}\n![](03-tuning-svm_files/figure-html/knn-nested-resampling-1.png){width=672}\n:::\n\n```{.r .cell-code}\nautoplot(knn_nested_tune$learners[[2]]$tuning_instance)\n```\n\n::: {.cell-output-display}\n![](03-tuning-svm_files/figure-html/knn-nested-resampling-2.png){width=672}\n:::\n\n```{.r .cell-code}\nautoplot(knn_nested_tune$learners[[3]]$tuning_instance)\n```\n\n::: {.cell-output-display}\n![](03-tuning-svm_files/figure-html/knn-nested-resampling-3.png){width=672}\n:::\n\n```{.r .cell-code}\n# Get AUC and acc for outer folds\nknn_nested_tune$score(msrs(c(\"classif.acc\", \"classif.auc\")))[, .(iteration, classif.auc, classif.acc)]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   iteration classif.auc classif.acc\n       <int>       <num>       <num>\n1:         1   0.9637586   0.9087353\n2:         2   0.9707207   0.9217731\n3:         3   0.9613927   0.9034573\n```\n\n\n:::\n\n```{.r .cell-code}\n# Average over outer folds - our \"final result\" performance for kNN\n# AUC is averaged over outer folds\nknn_nested_tune$aggregate(msrs(c(\"classif.acc\", \"classif.auc\")))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nclassif.acc classif.auc \n  0.9113219   0.9652906 \n```\n\n\n:::\n:::\n\n\nSeems like a decent result?\nLet's try to beat it with some other learner!\n\n## Your Turn!\n\nAbove you have a boilerplate to tune your own learner.\nStart with either of the other three learners we've seen, pick one ore two hyperparameters to tune with a reasonable budget (note we have limited time and resources), tune on the training set and evaluate per AUC on the test set.\n\nSome pointers:\n\n-   Consult the Learner docs to see tuning-worthy parameters:\n\n    -   `lrn(\"classif.xgboost\")$help()` links to the `xgboost` help\n    -   `lrn(\"classif.rpart\")$help()` analogously for the decision tree\n    -   You can also see the documentation online, e.g. <https://mlr3learners.mlr-org.com/reference/mlr_learners_classif.xgboost.html>\n\n-   Parameter search spaces in `ps()` have different types, see the help at `?paradox::Domain`\n    -   Use `p_int()` for integers, `p_dbl()` for real-valued params etc.\n\n-   If you don't know which parameter to tune, try the following:\n    -   `classif.xgboost`:\n        -   Important: `nrounds` (integer) (>= 1)\n        -   Important: `eta` (double) (0 < eta < 1)\n        -   Maybe: `max_depth` (integer)\n\n    -   `classif.rpart`:\n        -   `cp` (double)\n        -   Maybe: `maxdepth` (integer) (< 30)\n\n    -   `classif.ranger`:\n        -   `mtry` (integer) (default is 500)\n        -   `max.depth` (integer)\n\nNote: Instead of randomly picking parameters from the design space, we can also generate a grid of parameters and try those.\nWe'll not try that here for now, but you can read up on how to do that here: `?mlr_tuners_grid_search`.\n\n-> `generate_design_grid(search_space, resolution = 5)`\n\nAlso note that the cool thing about the `auto_tuner()` is that it behaves just like any other `mlr3` learner, but it automatically tunes itself.\nYou can plug it into `resample()` or `benchmark_grid()` just fine!\n\n# Support Vector Machines\n\nLet's circle back to new learners and explore SVMs a little by trying out different kernels at the example of our penguin dataset we used in the beginning:\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins <- na.omit(palmerpenguins::penguins)\n\nggplot(penguins, aes(x = flipper_length_mm, y = body_mass_g, color = species)) +\n  geom_point() +\n  labs(\n    title = \"Palmer Penguins\",\n    x = \"Flipper Length [mm]\", y = \"Body Mass [g]\",\n    color = \"Species\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](03-tuning-svm_files/figure-html/penguins-1.png){width=672}\n:::\n:::\n\n\nSince we don't care about prediction accuracy for now, we'll use the whole dataset for training and prediction. Please only do this with toy data 🙃.\n\nFor the SVM algorithm itself, we use the `svm` learner from the `e1071` package (great name, I know) but once again use `{mlr3}`'s interface\n\nAccording to the docs (`?e1071::svm`) we have the choice of the following kernels:\n\n-   `\"linear\"`: $u'v$\n-   `\"polynomial\"`: $(\\mathtt{gamma} \\cdot u' \\cdot v + \\mathtt{coef0})^\\mathtt{degree}$\n-   `\"radial\"`: $\\exp(-\\mathtt{gamma} \\cdot |u-v|^2)$\n-   `\"sigmoid\"`: $\\tanh(\\mathtt{gamma} \\cdot u'v + \\mathtt{coef0})$\n\nWhere `gamma`, `degree`, and `coef0` are further hyperparameters.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsvm_learner <- lrn(\"classif.svm\")\n\n# What parameters do we have?\nsvm_learner$param_set$ids()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"cachesize\"       \"class.weights\"   \"coef0\"           \"cost\"           \n [5] \"cross\"           \"decision.values\" \"degree\"          \"epsilon\"        \n [9] \"fitted\"          \"gamma\"           \"kernel\"          \"nu\"             \n[13] \"scale\"           \"shrinking\"       \"tolerance\"       \"type\"           \n```\n\n\n:::\n\n```{.r .cell-code}\n# Default kernel\nsvm_learner$param_set$default$kernel\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"radial\"\n```\n\n\n:::\n:::\n\n\n## Your Turn!\n\nBelow you have a boilerplate for\n\na)  Creating an SVM learner and train it on the penguin dataset with 2 predictors\nb)  Plotting decision boundaries with it (using the `{mlr3}` helper function)\n\nRun the code below once to see what linear decision boundaries look like, then pick different kernels from the list above and run it again.\n\n-   What kernel would you pick just by the looks of the boundaries?\n-   How do the boundaries change if you also adjust the other hyperparameters?\n-   Try picking any other two variables as features (`penguin_task$col_info`)\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguin_task <- TaskClassif$new(\n  id = \"penguins\", \n  backend = na.omit(palmerpenguins::penguins), \n  target = \"species\"\n)\n\npenguin_task$col_roles$feature <- c(\"body_mass_g\", \"flipper_length_mm\")\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create the learner, picking a kernel and/or other hyperparams\nsvm_learner <- lrn(\"classif.svm\", kernel = \"polynomial\", degree = 3)\n\n# Plot decision boundaries\nplot_learner_prediction(\n  learner = svm_learner, \n  task = penguin_task\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nINFO  [19:03:27.903] [mlr3] Applying learner 'classif.svm' on task 'penguins' (iter 1/1)\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Raster pixels are placed at uneven horizontal intervals and will be shifted\nℹ Consider using `geom_tile()` instead.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](03-tuning-svm_files/figure-html/svm-decision-boundaries-1.png){width=672}\n:::\n:::\n\n\nDirectly comparing multiple kernels with default parameters:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create a list of plots for each kernel\nplots <- lapply(c(\"linear\", \"polynomial\", \"radial\", \"sigmoid\"), \\(kernel) {\n    plot_learner_prediction(\n    learner = lrn(\"classif.svm\", kernel = kernel), \n    task = penguin_task\n  ) + \n    labs(subtitle = paste(\"SVM with \", kernel, \"kernel\"))\n})\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nINFO  [19:03:28.480] [mlr3] Applying learner 'classif.svm' on task 'penguins' (iter 1/1)\nINFO  [19:03:28.721] [mlr3] Applying learner 'classif.svm' on task 'penguins' (iter 1/1)\nINFO  [19:03:28.969] [mlr3] Applying learner 'classif.svm' on task 'penguins' (iter 1/1)\nINFO  [19:03:29.217] [mlr3] Applying learner 'classif.svm' on task 'penguins' (iter 1/1)\n```\n\n\n:::\n\n```{.r .cell-code}\n# Arrange the plots with the patchwork package\npatchwork::wrap_plots(plots, guides = \"collect\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Raster pixels are placed at uneven horizontal intervals and will be shifted\nℹ Consider using `geom_tile()` instead.\nRaster pixels are placed at uneven horizontal intervals and will be shifted\nℹ Consider using `geom_tile()` instead.\nRaster pixels are placed at uneven horizontal intervals and will be shifted\nℹ Consider using `geom_tile()` instead.\nRaster pixels are placed at uneven horizontal intervals and will be shifted\nℹ Consider using `geom_tile()` instead.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](03-tuning-svm_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n\n\n## SVM-Tuning\n\nLet's try a more complex tuning experiment, based on the spam task from before.\n\nWe'll create a new SVM learner object and this time explicitly tell it which classification to do --- that's the default value anyway, but `{mlr3}` wants us to be explicit here for tuning:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsvm_learner <- lrn(\"classif.svm\", predict_type = \"prob\", type = \"C-classification\")\n```\n:::\n\n\nFirst up we'll define our search space, meaning the range of parameters we want to test out. Since `kernel` is a categorical parameter (i.e. no numbers, just names of kernels), we'll define the search space for that parameter by just passing the names of the kernels to the `p_fct()` helper function that defines `factor`-parameters in `{mlr3}`.\n\nThe interesting thing here is that some parameters are only relevant for some kernels, which we can declare via a `depends` argument:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsearch_space_svm = ps(\n  kernel = p_fct(c(\"linear\", \"polynomial\", \"radial\", \"sigmoid\")),\n  # Degree is onoly relevant if \"kernel\" is \"polynomial\"\n  degree = p_int(lower = 1, upper = 7, depends = kernel == \"polynomial\")\n)\n```\n:::\n\n\n\nWe can create an example design grid to inspect our setup and see that `degree` is `NA` for cases where `kernel` is not `\"polynomial\"`, just as we expected\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngenerate_design_grid(search_space_svm, resolution = 3)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n<Design> with 6 rows:\n       kernel degree\n       <char>  <int>\n1:     linear     NA\n2: polynomial      1\n3: polynomial      4\n4: polynomial      7\n5:     radial     NA\n6:    sigmoid     NA\n```\n\n\n:::\n:::\n\n\n## Your Turn!\n\nThe above should get you started to...\n\n1.  Create a `search_space_svm` like above, tuning...\n\n-   `cost` from 0.1 to 1 (hint: `trafo = function(x) 10^x`)\n-   `kernel`, (like above example)\n-   `degree`, as above, **only if** `kernel == \"polynomial\"`\n-   `gamma`, from e.g. 0.01 to 0.2, **only if** `kernel` is polynomial, radial, sigmoid (hint: you can't use `kernel != \"linear\"` unfortunately, but `kernel %in% c(...)`) works\n\n2.  Use the `auto_tuner` function as previously seen with\n\n-   `svm_learner` (see above)\n-   A resampling strategy (use `\"holdout\"` if runtime is an issue)\n-   A measure (e.g. `classif.acc` or `classif.auc`)\n-   The search space you created in 1.\n-   A termination criterion (e.g. 40 evaluations)\n-   Random search as your tuning strategy\n\n3.  Train the auto-tuned learner and evaluate on the test set\n\nWhat parameter settings worked best?\n",
    "supporting": [
      "03-tuning-svm_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}